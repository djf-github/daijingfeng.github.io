<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"djf-github.github.io","root":"/","scheme":"Muse","version":"7.7.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="我要养只大熊猫">
<meta property="og:url" content="https://djf-github.github.io/index.html">
<meta property="og:site_name" content="我要养只大熊猫">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="djf">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://djf-github.github.io/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false
  };
</script>

  <title>我要养只大熊猫</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">我要养只大熊猫</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档</a>

  </li>
        <li class="menu-item menu-item-commonweal">

    <a href="/404/" rel="section"><i class="fa fa-fw fa-heartbeat"></i>公益 404</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://djf-github.github.io/2020/03/05/%E5%8D%97%E6%98%8C%E5%A4%A7%E5%AD%A6-2020%E6%98%A5%E6%8B%9B-JAVA%E5%BC%80%E5%8F%91/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="djf">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="我要养只大熊猫">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/05/%E5%8D%97%E6%98%8C%E5%A4%A7%E5%AD%A6-2020%E6%98%A5%E6%8B%9B-JAVA%E5%BC%80%E5%8F%91/" class="post-title-link" itemprop="url">简历</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-03-05 20:43:39" itemprop="dateCreated datePublished" datetime="2020-03-05T20:43:39+08:00">2020-03-05</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-03-28 11:54:35" itemprop="dateModified" datetime="2020-03-28T11:54:35+08:00">2020-03-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%85%B6%E4%BB%96/" itemprop="url" rel="index"><span itemprop="name">其他</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="个人信息"><a href="#个人信息" class="headerlink" title="个人信息"></a>个人信息</h3><hr>
<p><em>手机：15879572969</em>        <em>邮箱：<a href="mailto:1658687555@qq.com">1658687555@qq.com</a></em></p>
<p><em>姓名：戴敬峰</em>                <em>性别：男</em>    </p>
<p><em>毕业学校：南昌大学</em>        <em>专业：计算机科学与技术</em></p>
<p><em>期望职位：Java开发</em>        </p>
<h3 id="个人技能"><a href="#个人技能" class="headerlink" title="个人技能"></a>个人技能</h3><hr>
<p><em>掌握常见（线性表，链表，队列，树，图等）数据结构</em></p>
<p><em>熟悉常见（递推，枚举，递归，分治，贪婪，回溯）等算法</em></p>
<p><em>熟悉计算机网络（TCP/IP协议）</em></p>
<p><em>熟悉 JVM虚拟机（Java内存区域、Java内存管理、GC）</em></p>
<p><em>掌握 Spring及 SpringBoot整合开发</em></p>
<p><em>熟悉 Linux 常用命令</em></p>
<h3 id="项目经历"><a href="#项目经历" class="headerlink" title="项目经历"></a>项目经历</h3><hr>
<p><em>WEB在线聊天：    springboot整合neety 实现通信，结合mysql保存数据</em></p>
<h3 id="个人评价"><a href="#个人评价" class="headerlink" title="个人评价"></a>个人评价</h3><hr>
<p><em>基础扎实,热爱技术,喜欢逛社区,关注公众号看推荐</em></p>
<p><em>偶尔写博客.基础面广.喜欢接触新技术</em></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://djf-github.github.io/2020/02/23/type_IO/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="djf">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="我要养只大熊猫">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/02/23/type_IO/" class="post-title-link" itemprop="url">学习NIO BIO AIO</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-02-23 14:38:39" itemprop="dateCreated datePublished" datetime="2020-02-23T14:38:39+08:00">2020-02-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-03-09 02:30:12" itemprop="dateModified" datetime="2020-03-09T02:30:12+08:00">2020-03-09</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Netty/" itemprop="url" rel="index"><span itemprop="name">Netty</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h1><p>同步与异步</p>
<p>阻塞与非阻塞</p>
<p>BIO</p>
<p>同步阻塞IO流</p>
<p>工作原理：一个客户端请求，服务器创建一个线程与之对接，</p>
<p>然后该线程执行IO操作 ，线程等待IO操作结束然后返回结果到客户端。期间有其他客户端请求，即再创建一个线程与之对接。</p>
<p>NIO</p>
<p>同步非阻塞IO流</p>
<p>工作原理：</p>
<p>客户端发生一个请求，服务端</p>
<p>AIO</p>
<p>异步非阻塞IO流</p>
<h1 id="线程模型"><a href="#线程模型" class="headerlink" title="线程模型"></a>线程模型</h1><p>1.单线程模型</p>
<p>一个reactor线程接收并处理所有客户端请求</p>
<p>2.线程池模型</p>
<p>一个reactor线程接收客户端请求，然后分配给线程池处理</p>
<p>3.主从线程池模型</p>
<p>一个主线程池接收请求，然后分配给从线程池处理。</p>
<h1 id="开始"><a href="#开始" class="headerlink" title="开始"></a>开始</h1><p>1.构建一对主从线程组（即第三种线程模型）</p>
<p>2.定义服务启动类</p>
<p>3.为服务器设置Channel</p>
<p>4.设置处理从线程池的助手类初始化器</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://djf-github.github.io/2018/10/11/mysql/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="djf">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="我要养只大熊猫">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/10/11/mysql/" class="post-title-link" itemprop="url">Mysql 基本知识</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-10-11 15:53:39" itemprop="dateCreated datePublished" datetime="2018-10-11T15:53:39+08:00">2018-10-11</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-03-09 02:22:55" itemprop="dateModified" datetime="2020-03-09T02:22:55+08:00">2020-03-09</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Mysql/" itemprop="url" rel="index"><span itemprop="name">Mysql</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="mysql"><a href="#mysql" class="headerlink" title="mysql"></a>mysql</h1><h2 id="基本信息"><a href="#基本信息" class="headerlink" title="基本信息"></a>基本信息</h2><p>自带四个数据库</p>
<p> information_schema</p>
<p>存储数据库对象信息,如用户表信息,列信息,字符分区等等,</p>
<p>里面的信息不能动</p>
<p>performance_schema</p>
<p>存储数据库服务器性能参数</p>
<p>mysql</p>
<p>存储数据用户权限信息</p>
<p> sys</p>
<p>通过这个数据库可以快速的了解系统的元数据信息</p>
<p>就是通过视图的形式,把上面两个系统表结合起来</p>
<p>查询出更加令人理解的数据</p>
<h2 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h2><p>int    :    整型</p>
<p>double    :    浮点型    例如double(5,2)表示最多5位,其中两位小数  </p>
<p>decimal    :    浮点型,在表示钱方面使用该类型  因为不会出现精度缺失问题</p>
<p>char    :    固定长度字符串类型  char(255)为最大值</p>
<p>varchar    :    可变长字符串类型 varchar(65535)为最大值</p>
<p>text(clob)    :    字符串类型  用来存储大型字符串</p>
<p>blob    :    大字节数据</p>
<p>data    :    日期时间  格式为 yyyy-HH-dd</p>
<p>time    :    时间类型 格式为 hh:mm:ss</p>
<p>timestamp    :    时间戳类型  上面两个合起来</p>
<h2 id="DDL-操作数据库"><a href="#DDL-操作数据库" class="headerlink" title="DDL(操作数据库)"></a>DDL(操作数据库)</h2><p>create database[if not exists] name [charset=utf8]</p>
<p>drop database [if exists] name</p>
<p>alter database name character set utf8</p>
<h2 id="DDL-操作表"><a href="#DDL-操作表" class="headerlink" title="DDL(操作表)"></a>DDL(操作表)</h2><p>create table [if not exists] 表名(</p>
<p>列名 列类型,</p>
<p>列名 列类型</p>
<p>);</p>
<p>注意最后一行(最后一个括号前面)不能有逗号</p>
<p>desc tablename  查看表结构</p>
<p>drop table tablename  删除表</p>
<p>修改表</p>
<p>添加列</p>
<p>alter table tablename add(列名,列类型)</p>
<p>修改列类型</p>
<p>alter table tablename modify 列名 列的新类型</p>
<p>删除列</p>
<p>alter table tablename  drop 列名</p>
<p>修改表名</p>
<p>alter table tablename   rename to newname</p>
<h2 id="DML-修改记录"><a href="#DML-修改记录" class="headerlink" title="DML(修改记录)"></a>DML(修改记录)</h2><p>update 表名 set 列名=…where </p>
<p>不加条件则修改整列</p>
<p>运算符</p>
<p>=    ,    !=    ,&lt;&gt;    ,&lt;    ,    &gt;    ,&gt;=    ,between…and</p>
<p>in(…)    ,is null    ,    not,    or    ,and</p>
<p>示例</p>
<p>update tablename set age = age+1</p>
<p>所有记录的年龄1</p>
<p>update tablename set age = 1 where    age between 20    and    40</p>
<p>update tablename set age =1 where    name in(“张三”,”李四”)</p>
<p>where name is null  判断是否为null只能用这个</p>
<p>不能使用 =null</p>
<p>where not ….  取非</p>
<h2 id="DCL-用户和权限"><a href="#DCL-用户和权限" class="headerlink" title="DCL(用户和权限)"></a>DCL(用户和权限)</h2><p>创建用户</p>
<p>​    create user 用户名@ip地址 identified by ‘密码’;</p>
<p>​    只能在指定ip地址登录</p>
<p>​    @’%’    任意地址登录</p>
<p>给用户授权</p>
<p>​    grant 权限1,权限2… on 数据库.* to 用户名@ip地址</p>
<p>​    grant all</p>
<p>撤销授权</p>
<p>​    revoke 权限1,权限2… on 数据库.* to 用户名@ip地址</p>
<p>​    revoke all</p>
<p>查看权限</p>
<p>​    show grants for 用户名@ip地址</p>
<p>删除用户</p>
<p>​    drop  user 用户名@ip地址 </p>
<h2 id="DQL-查询"><a href="#DQL-查询" class="headerlink" title="DQL(查询)"></a>DQL(查询)</h2><p>select distict * from tablename(去除重复 行)</p>
<p>select name+100 from tablename(列运算  无法转换为数字时以0对待)</p>
<p>select  ifnull&lt;name,0&gt;+100 from tablename</p>
<p>(如果列明为name的值为null则使其以0 来运算  ,任意则与null运算为null)</p>
<p>select concat(,name1,+’:’,name2) from tablename</p>
<p>连接字符串</p>
<p>select name1 as n from tablename</p>
<p>给列取别名  as可以省略</p>
<h4 id="模糊查询"><a href="#模糊查询" class="headerlink" title="模糊查询"></a>模糊查询</h4><p>select * from name like ‘-‘   匹配一个字符</p>
<p>select * from name like ‘%’   匹配零个或多个字符</p>
<p>排序</p>
<p>order by  name asc  升序</p>
<p>order by name  desc  降序</p>
<p>order by name1 asc ,name2 desc  第一列升序 第二列降序</p>
<h4 id="聚合函数"><a href="#聚合函数" class="headerlink" title="聚合函数"></a>聚合函数</h4><p>count(*)所有列 count(name)某一列  </p>
<p>null不计算  *表示所有列都为null则不计数</p>
<p>count里面接数字和*是相同意义</p>
<p>sum()计算某一列所有值得和</p>
<p>字符串或null当作0运算</p>
<p>max()最大值</p>
<p>min()最小值</p>
<p>avg()平均值</p>
<h4 id="分组查询"><a href="#分组查询" class="headerlink" title="分组查询"></a>分组查询</h4><p>group by name</p>
<p>where … group by name  having …</p>
<p>where表示分组前条件  having表示分组后条件</p>
<p>limit num1,num2  从num1方开始 查找num2行记录</p>
<h4 id="多表查询"><a href="#多表查询" class="headerlink" title="多表查询"></a>多表查询</h4><p>合并结果集</p>
<p>要求两个结果集的列数和 列类型相同</p>
<p>—union, 去除重复行</p>
<p>—union all ,不去除重复行</p>
<p>select * from cd</p>
<p>union all</p>
<p>select * from cd</p>
<p>连接查询</p>
<p>–内连接</p>
<p>方言:</p>
<p>select * from 表1 别名1,表2 别名2 where 别名1.name=b别名2.name</p>
<p>标准:</p>
<p>select * from 表1 别名1 inner join 表2 别名2 on 别名1.name=b别名2.name</p>
<p>自然:</p>
<p>select * from 表1 别名1 natural join 表2 别名2</p>
<p>自然连接</p>
<p>–外连接</p>
<p>左外:</p>
<p>select * from 表1 别名1 left outer join 表2 别名2 on 别名1.name=b别名2.name</p>
<p>左外自然:  natural left outer join</p>
<p>右外:</p>
<p>select * from 表1 别名1 right outer join 表2 别名2 on 别名1.name=b别名2.name</p>
<p>右外自然:  natural right outer join</p>
<p>全外:</p>
<p>mysql不支持 一般采用合并结果集的方式实现全外的效果</p>
<h4 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h4><p>子查询出现的位置</p>
<p>​    where后面作为条件存在</p>
<p>​    from后面作为表存在</p>
<p>单行单列</p>
<p>=,    &gt;,    &lt;,    &gt;=,    &lt;=,    !=,</p>
<p>多行单列</p>
<p>in  all   any</p>
<p>单行多列</p>
<p>in</p>
<p>多方多列</p>
<p>出现在 from后面</p>
<h2 id="编码问题"><a href="#编码问题" class="headerlink" title="编码问题"></a>编码问题</h2><p>show variables like ‘char%’  参看cahr开头的所有变量</p>
<p>即查看所有编码</p>
<h2 id="备份与恢复"><a href="#备份与恢复" class="headerlink" title="备份与恢复"></a>备份与恢复</h2><p>mysqldump -uroot -p密码 数据库名&gt;文件路径</p>
<p>mysql -uroot -p密码 数据库名&lt;文件路径</p>
<p>注意 这种方式备份的是数据库内容</p>
<p>恢复的时候要先建一个数据库</p>
<p>或者使用一个已有的数据库来覆盖</p>
<p>登录之后</p>
<p>source 文件路径</p>
<h2 id="约束"><a href="#约束" class="headerlink" title="约束"></a>约束</h2><p>主键约束(唯一标识)</p>
<p>—不能为空</p>
<p>—唯一,即不能重复</p>
<p>—被引用 </p>
<p>create table [if not exists] 表名(</p>
<p>列名 列类型 primary key</p>
<p>);</p>
<p>或者</p>
<p>create table [if not exists] 表名(</p>
<p>列名 列类型,</p>
<p>primary key(列名)</p>
<p>);</p>
<p>alter table tablename add primary key(列名)</p>
<p>alter table tablename drop primary key</p>
<p>auto_increment 自增长</p>
<p>not null 非空约束</p>
<p>unique  唯一约束</p>
<p>外键约束</p>
<p>外键必须是另一个表的主键</p>
<p>可以有多个外键</p>
<p>foreign key(class)　references my_tab2(主键字段名);</p>
<p>alter table my_tab1 add [constraint 外键名] foreign key(外键字段名) references mytab2(主键字段名);</p>
<p>alter table my_tab drop foreign key 外键名字;</p>
<p>多对一(简单 不说明)</p>
<p>一对一</p>
<p>从表的主键当外键</p>
<p>多对多</p>
<p>建一个中间表</p>
<p>两个外键</p>
<h2 id="面向接口编程"><a href="#面向接口编程" class="headerlink" title="面向接口编程"></a>面向接口编程</h2><p>1.创建一个UserDao接口,建立一个实现类UserDaoImpl</p>
<p>2.建立一个包装类,返回实现类</p>
<p>3.建立一个配置文件,以键值对方式存储实现类的类名</p>
<p>4.包装类加载配置文件通过键得到值 即得到实现类的类名</p>
<p>然后通过反射创建实现类对象</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">InputStream in &#x3D; 包装类.class.getClassLoader()</span><br><span class="line">.getResourceAsStream(&quot;配置文件名&quot;);</span><br><span class="line">Properties props &#x3D; new Properties();</span><br><span class="line">props.load(in);</span><br><span class="line">String classname &#x3D; props.getProperty(&quot;键名&quot;);</span><br><span class="line">Class clazz &#x3D; Class.forName(classname);</span><br><span class="line">return (UserDao)clazz.newInstance();</span><br></pre></td></tr></table></figure>

<h2 id="批处理"><a href="#批处理" class="headerlink" title="批处理"></a>批处理</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">String sql &#x3D; &quot;insert into tablename values(?,?,?,?)&quot;;</span><br><span class="line">PrepareStatement &#x3D; pstmt &#x3D; con.PrepareStatement(sql);</span><br><span class="line">&#x2F;&#x2F; 循环添加参数</span><br><span class="line">for(int i &#x3D; 0;i&lt;1000;i++)</span><br><span class="line">&#123;</span><br><span class="line">    pstmt.setInt(1,i+1);</span><br><span class="line">    pstmt.setString(2,&quot;name_&quot;+i);</span><br><span class="line">    pstmt.setInt(3,i);</span><br><span class="line">    pstmt.setInt(4,i%2&#x3D;&#x3D;0?&quot;男&quot;:&quot;女&quot;);</span><br><span class="line">    </span><br><span class="line">    pstmt.adddBatch();&#x2F;&#x2F;添加批!这一组参数就保存到这个对象内置的集合里面了</span><br><span class="line">&#125;</span><br><span class="line">pstmt.excuteBatch();&#x2F;&#x2F;执行批</span><br></pre></td></tr></table></figure>

<h2 id="事务"><a href="#事务" class="headerlink" title="事务"></a>事务</h2><p>四个特性:</p>
<p>原子性</p>
<p>​    –事务中所有操作是不可再分割的原子单位</p>
<p>一致性</p>
<p>​    –事务执行后,数据库状态与其他业务规则保持一致</p>
<p>如转账业务,无论事务执行成功与否,参与转账的两个账户余额之和应该是不变的</p>
<p>隔离性</p>
<p>​    –在并发操作中,不同事务之间应该隔离开来,使每个并发中的事务不会相互干扰</p>
<p>持久性</p>
<p>​    –一旦事务提交成功,事务中所有的数据操作都必须被持久化到数据库中,即使提交事务后,数据库马上崩溃,在数据库重启时也必须能够保证通过某种机制恢复数据</p>
<h3 id="mysql的事务"><a href="#mysql的事务" class="headerlink" title="mysql的事务"></a>mysql的事务</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">start transaction;&#x2F;&#x2F;开启事务</span><br><span class="line">commit;&#x2F;&#x2F;提交事务</span><br><span class="line">rollback;&#x2F;&#x2F;回滚事务</span><br></pre></td></tr></table></figure>

<h3 id="JDBC使用事务"><a href="#JDBC使用事务" class="headerlink" title="JDBC使用事务"></a>JDBC使用事务</h3><p>con.setAutoCommit(boolean):设置是否为自动提交事务如果是true(默认为true)表示自动提交事务,也就是每条执行的SQL语句都是一个单独的事务,如果设置false就相当于开启事务</p>
<h3 id="四大隔离级别"><a href="#四大隔离级别" class="headerlink" title="四大隔离级别"></a>四大隔离级别</h3><p>SERIALIZABLE(串行化)</p>
<p>​    –不会出现任何并发问题</p>
<p>​    –    效率最低,当然安全性是最高的</p>
<p>REPEATABLE READ(可重复读)</p>
<p>​    –防止脏读和不可重复读</p>
<p>​    –    性能比串行化 好</p>
<p>READ COMMITTED(读以提交数据)</p>
<p>​    –    防止脏读</p>
<p>​    – 性能比 可重复读 要高</p>
<p>READ UNCOMMITTED(读未提交数据)</p>
<p>​    –可能出现人很好事务并发问题</p>
<p>​    – 性能最好</p>
<h3 id="mysql的隔离级别"><a href="#mysql的隔离级别" class="headerlink" title="mysql的隔离级别"></a>mysql的隔离级别</h3><p>mysql默认隔离级别为 Repeatable read 可以通过下面语句查看</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select @@tx_isolation</span><br></pre></td></tr></table></figure>

<p>也可以通过下面语句来设置当前连接的隔离级别</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set transaction isolationlevel [4选1]</span><br></pre></td></tr></table></figure>

<p>JDBC设置隔离级别</p>
<p>con.setTransactionIsolation(int level)</p>
<p>参数可选如下值</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Connection.TRANSATION_READ_UNCOMMITTED</span><br><span class="line">Connection.TRANSATION_READ_COMMITTED</span><br><span class="line">Connection.TRANSATION_REPEATABLE_READ</span><br><span class="line">Connection.TRANSATION_SERIALIZABLE</span><br></pre></td></tr></table></figure>



<p>###同一事物的所有操作必须使用同一个Connection对象</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line">    con.setAutoCommit(<span class="keyword">false</span>);<span class="comment">//开启事务</span></span><br><span class="line">    ...</span><br><span class="line">    ...</span><br><span class="line">    con.commit();<span class="comment">//提交事务</span></span><br><span class="line">&#125;<span class="keyword">catch</span>()</span><br><span class="line">&#123;</span><br><span class="line">    con.rollback();<span class="comment">//回滚事务</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="数据库连接池"><a href="#数据库连接池" class="headerlink" title="数据库连接池"></a>数据库连接池</h3><p>概念:用来管理Connection(连接的)进行重用,避免频繁的创建和销毁</p>
<p>几个基本参数</p>
<p>–初始大小(10)</p>
<p>指定初始有多少个Connection</p>
<p>–最大空闲连接数(12)</p>
<p>指定达到多少个空闲连接后开始销毁Connection</p>
<p>–最小空闲连接数(3)</p>
<p>指定达到多少个空闲连接后开始创建Connection</p>
<p>–增量(5)</p>
<p>每次创建最小单位</p>
<p>其他参数</p>
<p>–最大连接数(20)</p>
<p>–最大等待时间(1000)</p>
<h4 id="DBCP连接池"><a href="#DBCP连接池" class="headerlink" title="DBCP连接池"></a>DBCP连接池</h4><p>使用装饰模式</p>
<p>使用:</p>
<p>导入commons下dbcp和pool包</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">BasicDataSource dataSource &#x3D; new BasicDataSource();</span><br><span class="line">dataSource.set...</span><br><span class="line">dataSource.set...</span><br><span class="line">dataSource.set...</span><br><span class="line">dataSource.set...</span><br><span class="line">Connection con &#x3D; dataSource.getonnection();</span><br></pre></td></tr></table></figure>

<h4 id="C3P0连接池"><a href="#C3P0连接池" class="headerlink" title="C3P0连接池"></a>C3P0连接池</h4><p>使用动态代理</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CombopooledDateSource ds = <span class="keyword">new</span> CombopooledDateSource();<span class="comment">//默认加载指定路径的文件</span></span><br><span class="line"><span class="comment">//也可以加载指定路径的文件</span></span><br><span class="line">ds.set...</span><br><span class="line">ds.set...</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p>配置文件要求:</p>
<p>–文件名称:必须交c3p0-config.xml</p>
<p>–文件位置:必须在src下面</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;utf-8&quot;?&gt;</span><br><span class="line">&lt;c3p0-config&gt;</span><br><span class="line">	&lt;default-config&gt;</span><br><span class="line">		&lt;property name&#x3D;&quot;jdbcUrl&quot;&gt;</span><br><span class="line">		jdbc:mysql:&#x2F;&#x2F;localhost:3306&#x2F;mydb1&lt;&#x2F;property&gt;</span><br><span class="line">		&lt;property name&#x3D;&quot;dricverClass&quot;&gt;</span><br><span class="line">		com.mysql.jdbc.Driver&lt;\property&gt;</span><br><span class="line">		&lt;property name&#x3D;&quot;user&quot;&gt;root&lt;property&gt;</span><br><span class="line">		&lt;property name&#x3D;&quot;password&quot;&gt;</span><br><span class="line">		123456&lt;\property&gt;</span><br><span class="line">		&lt;property name&#x3D;&quot;acquireIncrement&quot;&gt;</span><br><span class="line">		3&lt;\property&gt;</span><br><span class="line">       &lt;\default-config&gt;</span><br><span class="line">  &lt;\c3p0-config&gt;</span><br></pre></td></tr></table></figure>



<h2 id="tomcat配置连接池"><a href="#tomcat配置连接池" class="headerlink" title="tomcat配置连接池"></a>tomcat配置连接池</h2><p>配置<Context>元素中配置<Resource>子元素</p>
<p>\tomcat\conf\</p>
<p>context.xml</p>
<p>配置所有主机所有项目</p>
<p>server.xml</p>
<p><Host>元素下</p>
<p>配置这个主机所有项目</p>
<p>\Catalina\localhost</p>
<p>新建一个xml配置文件</p>
<p>命名 项目名.xml</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;Context ...&gt;</span><br><span class="line">...</span><br><span class="line">&lt;Resource name&#x3D;&quot;自定义名称&quot;</span><br><span class="line">		 type&#x3D;&quot;type(自己需要的类型:例如 CombopooledDateSource)&quot;		 factory&#x3D;&quot;org.apache.naming.factory.BeanFactory&quot;</span><br><span class="line">&#x2F;&gt;</span><br><span class="line">&lt;&#x2F;Context&gt;</span><br></pre></td></tr></table></figure>

<p>–name: 指定资源的名称,这个名称可以随便给,在获取资源时需要用到</p>
<p>–factory:用来创建资源的工厂,这个值基本上是固定的,不用修改</p>
<p>–type:资源的类型,我们要给出的类型当然是我们连接池的类型了</p>
<p>–bar:表示资源的属性,如果存在名为bar的属性,name就配置bar的值,对于连接池而言,就是配置 url,username等属性</p>
<h3 id="获取资源"><a href="#获取资源" class="headerlink" title="获取资源"></a>获取资源</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Context initCtx = <span class="keyword">new</span> initialContext();</span><br><span class="line">Context envCtx = (Context)initCtx.lookup(<span class="string">"java:comp/env"</span>);</span><br><span class="line">type bean = (type)envCtx.lookup(<span class="string">"bean/MyBeanFactory"</span>);</span><br><span class="line">writer.println(<span class="string">"foo="</span>+bean.getFoo+<span class="string">",bar = "</span>+bean.getBar());</span><br></pre></td></tr></table></figure>



<h2 id="dbUtils"><a href="#dbUtils" class="headerlink" title="dbUtils"></a>dbUtils</h2><p>QueryRunner</p>
<p>updte方法</p>
<p>–int update (String sql ,Object … pramas)–&gt;可执行增,删,改,查</p>
<p>–T query(String sql,ResultSetHandler rsh,Object…pramas)—&gt;可执行查询</p>
<p>它会先得到ResultSet ,然后调用rsh的handle()把rs转换成需要的类型;</p>
<p>ResultSetHandler接口:</p>
<p>BeanHandler(单行)–&gt;构造器需要一个Class类型的参数,用来把一行结果集转换成指定类型的javaBean类型</p>
<p>BeanListHandler(多行)–&gt;构造器也是需要一个Class类型的参数,用来把一行结果集转换成指定类型</p>
<p>一行转换成javaBean多行则转换成List</p>
<p>MapHandler(单行)–&gt; 把一行结果集转换成Map对象</p>
<p>MapListHandler(多行)–&gt;把一行记录转换成一个Map,多行就是对个Map 即List<Map></p>
<p>ScalarHandler(单行单列)–&gt; 通常与select count(*) from …</p>
<p>结果集单行单列,返回值是一个Object</p>
<h3 id="util下的d时间和sql下的时间类型转换"><a href="#util下的d时间和sql下的时间类型转换" class="headerlink" title="util下的d时间和sql下的时间类型转换"></a>util下的d时间和sql下的时间类型转换</h3><p>sql的时间类型是util时间类型的子类  可直接赋值</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java.util.Date date &#x3D; new java.sql.Date()</span><br></pre></td></tr></table></figure>

<p>util的Date类型通过 getTime方法返回一个毫秒值然后传给sql下时间的类型的构造方法完成转换</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">java.util.Date date &#x3D; new java.util.Date();</span><br><span class="line">long l &#x3D; date.getTime();</span><br><span class="line">java.sql.Date sqldate &#x3D; new java.sql.Date(l);</span><br></pre></td></tr></table></figure>

<p>net start mysql</p>
<p>net stop mysql</p>
<p>登陆</p>
<p>mysql -uroot -p</p>
<p>​    -u:后面跟用户名</p>
<p>​    -p:后面跟密码</p>
<p>​    -h:后面跟ip</p>
<p>退出</p>
<p>exit或quit</p>
<p>WEB-INF里面不允许浏览器访问</p>
<h2 id="配置外部应用"><a href="#配置外部应用" class="headerlink" title="配置外部应用"></a>配置外部应用</h2><p> 意思就是不放在webapps下面</p>
<p>​    两种方式:</p>
<h2 id="配置虚拟主机"><a href="#配置虚拟主机" class="headerlink" title="配置虚拟主机"></a>配置虚拟主机</h2><p>​    在server.xml中增加一个 &lt;Host&gt;标签</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://djf-github.github.io/2018/06/22/linux_base/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="djf">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="我要养只大熊猫">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/06/22/linux_base/" class="post-title-link" itemprop="url">Base of Linux</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-06-22 00:09:39" itemprop="dateCreated datePublished" datetime="2018-06-22T00:09:39+08:00">2018-06-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-03-09 02:23:11" itemprop="dateModified" datetime="2020-03-09T02:23:11+08:00">2020-03-09</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="linux基础"><a href="#linux基础" class="headerlink" title="linux基础"></a>linux基础</h1><h2 id="常见命令"><a href="#常见命令" class="headerlink" title="常见命令"></a>常见命令</h2><p>cd      任何目录下回到用户目录</p>
<p>cd空格..     回到上级目录</p>
<p>cp      复制</p>
<p>mv      移动</p>
<p>history     查看历史命令</p>
<p>Ctrl+R     查找历史命令</p>
<p>tab     补全命令或者文件名</p>
<p>clear     清屏</p>
<p>mkdir     创建文件夹</p>
<p>touch     创建新文件或者更新已有文件时间</p>
<p>rm     删除</p>
<p>编辑器内撤销操作:按下esc退出插入模式按u撤销</p>
<h3 id="与时间相关"><a href="#与时间相关" class="headerlink" title="与时间相关"></a>与时间相关</h3><p>date </p>
<p>​    查看当前时间(默认中国时间)</p>
<p>​    -u</p>
<p>​    显示标准时间</p>
<p>​    -s</p>
<p>​    设置当前时间</p>
<p>​    +%Y–%m–%d</p>
<p>​    格式化显示时间</p>
<p>htwclock(clock)</p>
<p>​    显示硬件时钟时间</p>
<p>cal</p>
<p>​    查看日历</p>
<p>uptime</p>
<p>​    查看系统运行时间</p>
<h3 id="输出-查看命令"><a href="#输出-查看命令" class="headerlink" title="输出,查看命令"></a>输出,查看命令</h3><p>echo </p>
<p>​    输出</p>
<p>cat</p>
<p>​    查看文件</p>
<p>more</p>
<p>​    翻页显示内容,只能向后翻页,按空格翻页</p>
<p>less</p>
<p>翻页显示内容,可以上下翻页</p>
<p>head</p>
<p>​    显示文件的头几行(默认10行)</p>
<p>​    -n :指定显示行数</p>
<p>tail</p>
<p>​    显示文件末尾几行(默认十行 )</p>
<p>​    -n :指定显示行数</p>
<p>​    -f :追踪显示文件更新</p>
<p>​    (一般用于查看日志,命令不会退出,而是持续显示新加入的内容 ) </p>
<h3 id="查看硬件信息"><a href="#查看硬件信息" class="headerlink" title="查看硬件信息"></a>查看硬件信息</h3><p>lspci</p>
<p>​    查看PCI设备</p>
<p>​    -v :查看详细信息</p>
<p>lsusb</p>
<p>​    查看USB设备</p>
<p>​    -v :查看详细信息</p>
<p>lsmod</p>
<p>​    查看加载的模块(驱动)</p>
<h3 id="关机-重启"><a href="#关机-重启" class="headerlink" title="关机,重启"></a>关机,重启</h3><p>shutdown</p>
<p>​    shutdown[关机,重启] 时间</p>
<p>​    关闭或重启计算机</p>
<p>​    -h :关闭计算机</p>
<p>​    -r :重新启动</p>
<p>例如:</p>
<p>​    立即关机        shutdown -h now</p>
<p>​    十分钟后关机        shutdown -h +10</p>
<p>​    23:30分后关机     shutdown -h 23:30</p>
<p>​    立即重启            shutdown -r now</p>
<p>poweroff</p>
<p>​    立即关闭计算机</p>
<p>reboot</p>
<p>​    立即重启计算机</p>
<h3 id="归档-压缩"><a href="#归档-压缩" class="headerlink" title="归档,压缩"></a>归档,压缩</h3><p>  zip</p>
<p>​    压缩文件</p>
<p>​    zip  [压缩后文件名.zip][要压缩的文件]</p>
<p>unzip</p>
<p>​    解压缩zip文件</p>
<p>​    unzip [要解压缩的文件.zip]</p>
<p>gzip</p>
<p>​    压缩文件</p>
<p>​    </p>
<p>tar</p>
<p>​    用以归档文件</p>
<p>​    tar -cvf  [归档后文件名.tar]  [要归档的文件夹]</p>
<p>​    tar  -xvf [要解开的归档的文件名.tar]</p>
<p>​    tar -cvzf :加入-z后表示对归档后的文件执行gzip压缩操作</p>
<p>​    操作后的文件名后缀位  .tar.gz</p>
<p>​    tar -xzvf 解压缩 tar.gz文件</p>
<p>-c :建立压缩档案</p>
<p>-x :解压</p>
<p>-t :查看内容</p>
<p>-r :向压缩归档文件末尾追加文件</p>
<p>-u :更新原压缩包中的文件</p>
<p>下面是五个独立命令,压缩解压都要用到其中一个，可以和别的命令连用但只能用其中一个。下面的参数是根据需要在压缩或解压档案时可选的。</p>
<p>-z :有gzip属性的</p>
<p>-j :有bz2属性的</p>
<p>-Z :有compress属性的</p>
<p>-v :显示所有过程</p>
<p>-O :将文件解开到标准输出</p>
<p>下面的参数-f是必须的</p>
<p>-f : 使用档案名字,切记,这个参数是最后一个参数,后面只能接档案名</p>
<h3 id="查找"><a href="#查找" class="headerlink" title="查找"></a>查找</h3><p>locat</p>
<p>快速查找文件或文件夹</p>
<p>locate [关键字]</p>
<p>注意:此命令是查找数据库,数据库默认每天更新一次</p>
<p>新加入的文件查会找不到</p>
<p>可用update命令手动更新数据库</p>
<p>find</p>
<p>​    高级查找文件,文件夹</p>
<p>​    fing [查找位置][查找参数]</p>
<p> -name :关键字查找</p>
<p>​    例如:</p>
<p>find [查找位置] *keyword* 所有包含keyword的文件或文件夹</p>
<p>find [查找位置] *.keyword  所有keyword后缀名的文件</p>
<p>  -perm :权限查找</p>
<p>  -type :类型查找</p>
<p>  -user :基于某个用户的查找</p>
<p>  -group:基于某个用户组查找</p>
<p>  -citme:基于更新时间查找</p>
<p>  -size:基于文件大小查找</p>
<p>find最重要的是可以连接其他命令对查找出来的结果执行其他操作</p>
<p>fing [查找位置][查找参数] -exec  命令 -参数 {} ;</p>
<h3 id="vi-vim文本编辑器"><a href="#vi-vim文本编辑器" class="headerlink" title="vi vim文本编辑器"></a>vi vim文本编辑器</h3><p>vim是vi的增强版本</p>
<p>vim已经不仅仅是最为普通意义上的文本编辑器(如记事本)</p>
<p>而是被广泛的作为在文本编辑,文本处理,代码开发等等 用途</p>
<p>linux中知名的文本编辑器还有emacs,他的功能比VIM还要强大</p>
<p>一般通过vim+目标文件路径形式使用</p>
<p>如果目标文件存在,则打开该文件</p>
<p>如果目标文件不存在,则新建该文件</p>
<p>vim有三种模式</p>
<p>​    -命令模式(常规模式)</p>
<p>​    任何模式下可以通过esc进入命令模式</p>
<p>​    命令模式可以键入不同的命令来完成选择,复制,粘贴,撤销等操作</p>
<p>命令模式常用命令</p>
<p> i    在光标前插入文本</p>
<p> o    在当前行的下面插入新行</p>
<p> dd           删除整行</p>
<p> yy        将当前行的内容放入缓冲区</p>
<p> n+yy    将接下来n行的内容放入缓存区(复制n行)</p>
<p> p        将缓冲区的文本放入光标后()粘贴</p>
<p> u         撤销上一个操作</p>
<p> r        替换当前字符</p>
<p> /        查找关键字</p>
<p>​    -插入模式</p>
<p>在命令模式中按  “I”  键即可进入插入模式,</p>
<p>在插入模式中可以输入编辑文本内容</p>
<p>​    ex模式</p>
<p>在命令模式中按  “:”可以进入ex模式,光标会移动到底部,</p>
<p>在这里可以保持修改或退出vim.</p>
<p>w    保存当前修改</p>
<p>q    退出(不保存)</p>
<p>q!    强制退出</p>
<p>x    保持并退出,相当于wq</p>
<p>set number    显示行号</p>
<p>!    系统命令        执行一个系统命令并显示结果</p>
<p>sh    切换到命令行,使用ctrl+d切换回vim</p>
<h2 id="磁盘和文件系统管理"><a href="#磁盘和文件系统管理" class="headerlink" title="磁盘和文件系统管理"></a>磁盘和文件系统管理</h2><h3 id="磁盘结构"><a href="#磁盘结构" class="headerlink" title="磁盘结构"></a>磁盘结构</h3><p>(老版本磁盘,目前市场大部分电脑使用的)</p>
<p>柱面(cylinder),</p>
<p>扇区(sector),</p>
<p>磁头(head),</p>
<p>磁盘设备在dev目录下的文件名称</p>
<p>一般为hd[a-z],或 sd[a-z]</p>
<p>IDE设备的名称为hd,(老版本的硬件,)</p>
<p>SATA,SCSI,SAS,USB等设备的名称为sd</p>
<h3 id="分区概念"><a href="#分区概念" class="headerlink" title="分区概念"></a>分区概念</h3><h4 id="分区机制"><a href="#分区机制" class="headerlink" title="分区机制"></a>分区机制</h4><p>MBR</p>
<p>(目前还在使用,但逐渐被GPT取代)</p>
<p>传统分区机制,应用于绝大部分使用BIOS的PC设备</p>
<p>支持32位和64位系统</p>
<p>支持分区数量有限</p>
<p>不支持超过2T的硬盘(有第三方解决方案)</p>
<p>分区</p>
<p>最多只能创建4个主分区</p>
<p>如需要更多的分区需要创建拓展分区</p>
<p>一个拓展分区会占用一个主分区的位置</p>
<p>拓展分区不能使用,需要在里面创建逻辑分区</p>
<p>最多支持65个IDE分区和15个SCSI分区</p>
<p>GPT</p>
<p>较新的分区机制,解决了MBR很多缺点</p>
<p>支持超过2T的硬盘(MBR采用32机制,GPT使用64机制)</p>
<p>向后兼容MBR</p>
<p>必须在支持UEFI的硬件上使用(新的性能较好的电脑一般都可以两种互换)</p>
<p>必须使用64系统</p>
<p>Mac,linux系统都能支持GPT分区格式</p>
<h3 id="fdisk进行磁盘管理"><a href="#fdisk进行磁盘管理" class="headerlink" title="fdisk进行磁盘管理"></a>fdisk进行磁盘管理</h3><p>fdisk是老牌的分区工具支持绝大多数操作系统,几乎所有的linux发型版本都装有fdisk</p>
<p>包括linux在rescue模式下依然能够使用</p>
<p>fdisk是基于MBR的分区工具</p>
<p>需要超级用户权限才能使用</p>
<p>fdisk +需要分区的磁盘</p>
<p>然后会进入fdisk的命令行交互,按提示即可完成分区</p>
<p>cat /proc/partitions 查看分区信息  (proc目录下保存的都是系统实时信息)</p>
<h3 id="linux文件系统"><a href="#linux文件系统" class="headerlink" title="linux文件系统"></a>linux文件系统</h3><p>创建文件系统的过程称之为格式化</p>
<p>没有文件系统的设备称之为裸设备</p>
<p>使用MKE2FS来创建文件系统</p>
<p>linux主流文件系统为ext4</p>
<p>例如 MKE2FS -t ext4 /dev/sda</p>
<p>常用参数</p>
<p>–b blocksize   指定文件系统快大小</p>
<p>–c            建立文件系统时检查坏损快</p>
<p>–L  Lable    指定卷标</p>
<p>–j            建立文件系统日志</p>
<p>MKFS也可以创建文件系统,但支持参数较少,不能进行精细化控制</p>
<p>例如     mkfs.ext4  /dev/sdb</p>
<p>DUMPE2FS用于查看文件系统信息</p>
<p>例如  dumpe2fs /edv/sda</p>
<p>E2LABLE也可以用来为文件系统添加标签</p>
<p>– e2lable /dev/sda 显示标签</p>
<p>–e2lable /dev/sda  标签名  设置标签</p>
<p>FSCK用来检查并修复损坏的文件系统</p>
<p>fsck /dev/sda </p>
<p>–使用-y参数不提示,直接进行修复</p>
<p>–默认fsck会自动判断文件系统类型,如果损坏较为严重,需要用</p>
<p>​    -t参数来指定文件系统类型</p>
<p>–对于识别问文件的损坏数据(文件系统无记录),fsck会将该文件放入lost+fount目录</p>
<p>–系统启动时会对磁盘进行fsck操作</p>
<p>挂载,使用文件系统</p>
<p>挂载</p>
<p>创建好文件系统后需要挂载到一个目录才能使用</p>
<p>windows和mac系统会进行自动挂载</p>
<p>linux需要需要手工进行挂载操作或配置系统进行自动挂载</p>
<p>使用mount命令挂载目录</p>
<p>mount dev/sda  /mnt/</p>
<p>常用参数</p>
<p>不带参数显示所有已挂载的文件系统</p>
<p>–t    指定文件系统类型</p>
<p>–o   指定挂载选项</p>
<p>​    ro ,rw,    以只读或读写形式挂载,默认是rw</p>
<p>​    sync    代表不使用缓存,而是对所有操作直接写入磁盘</p>
<p>​    async    代表使用缓存,默认是async</p>
<p>​    noatime    代表每次访问文件时不更新文件访问时间</p>
<p>​    atime    代表每次访问文件时更新访问时间</p>
<p>​    remount    重新挂载文件系统</p>
<p>umount dev/sda 等于umount  /mnt/</p>
<p>写在文件系统,相当于windows里面的弹出</p>
<p>如果出现device is busy  表示文件系统正在被使用</p>
<p>fuser -u /mnt  查看使用文件系统的进程</p>
<p>lsof /mnt  查看正在被使用的文件</p>
<p>自动挂载</p>
<p>配置/etc/fstab</p>
<p>每一行代表一个挂载设置,格式如下</p>
<p>/dev/sda             /mnt    ext4        defaults        0 0</p>
<p>需要挂载的设备    挂载点    文件系统        挂载选项        dump,fsck相关选项</p>
<p>需要挂载的设备也可以使用LABLE识别,使用lable=linuxcast取代/dev/sda</p>
<p>也可以使用mount -a 命令 挂载所有在配置文件中配置的磁盘或分区</p>
<h2 id="获取帮助"><a href="#获取帮助" class="headerlink" title="获取帮助"></a>获取帮助</h2><p>linux提供了极为详细的的帮助工具及文档,一定要养成查帮助文档</p>
<p>的习惯,可以大大减少需要记忆的东西并提高效率</p>
<p>几乎所有命令都可以使用-h 或者–help参数获取使用方法,参数信息等</p>
<h3 id="man"><a href="#man" class="headerlink" title="man"></a>man</h3><p>man命令是linux中最为常用的帮助命令,将要获取参数的命令作为参数</p>
<p>运行man命令就可以获取相应的帮助文档</p>
<p>man文档分为很多类型</p>
<p>man -k 关键字  查找包含该关键字的文档</p>
<h3 id="INfo"><a href="#INfo" class="headerlink" title="INfo"></a>INfo</h3><p>info与man类似,但是提供的信息更为详细深入,以类似网页的形式显示</p>
<p>info也可以使用关键字进行模糊查找</p>
<h3 id="DOC"><a href="#DOC" class="headerlink" title="DOC"></a>DOC</h3><p>统一保存在/usr/share/doc目录中</p>
<h2 id="用户及权限基础"><a href="#用户及权限基础" class="headerlink" title="用户及权限基础"></a>用户及权限基础</h2><h3 id="用户-组"><a href="#用户-组" class="headerlink" title="用户,组"></a>用户,组</h3><p>每个用户拥有一个UserID操作系统实际使用的是ID不是用户名</p>
<p>每个用户属于一个主组,属于一个或多个附属组</p>
<p>每个组拥有一个GroupID</p>
<p>每个进程以一个用户身份运行,并受该用户可访问资源限制</p>
<p>每个可登陆用户拥有一个指定的shell</p>
<h4 id="用户"><a href="#用户" class="headerlink" title="用户"></a>用户</h4><p>用户ID为32位,从0开始,但是为了和老式系统兼容(16位),用户ID限制在60000以下</p>
<p>用户分为三种</p>
<p>​    –root用户(id为0的用户为root用户)</p>
<p>​    –系统用户(1~499)(专为进程使用而创建的用户)</p>
<p>​    –普通用户(500y以上)</p>
<p>系统中的文件都有一个所属用户和所属组</p>
<p>使用id命令可以显示当前用户的信息</p>
<p>passwd可以修改当前用户密码</p>
<p>相关文件</p>
<p>/etc/passwd        –保存用户信息</p>
<p>/etc/shadow        –保存用户密码(加密的)</p>
<p>/etc/group        –保存组信息</p>
<p>查看当前登录用户</p>
<p>whoami        显示当前用户</p>
<p>who        显示有哪些用户已经登录系统</p>
<p>w            显示有哪些用户已经登录并且在干什么</p>
<p>创建一个用户</p>
<p>useradd aaa</p>
<p>这个命令执行的操作</p>
<p>1.在etc/passwd中添加用户信息</p>
<p>2.如果使用passwd命令创建密码,则将密码保存在etc/shadow中</p>
<p>3.为用户建立一个新的家目录 /home/aaa</p>
<p>4.将 /etc/skel中的文件复制到用户的家目录中</p>
<p>5.建立一个与用户名相同的组,新建用户默认属于这个同名组</p>
<p>常用参数</p>
<p> -d         家目录</p>
<p>-s        登录shell</p>
<p>-u        userid</p>
<p>-g         主组</p>
<p>-G        附属组(最多31个,用逗号分隔)</p>
<p>也可以通过直接修改/etc/passwd文件来实现,但是不建议</p>
<p>修改用户信息</p>
<p>usermod  参数   用户名</p>
<p>参数</p>
<p>-l        新用户名</p>
<p>-u        新userid</p>
<p>-d        用户家目录位置</p>
<p>-g        用户所属组</p>
<p>-G        用户所属附属组</p>
<p>-L        锁定用户使其不能登录</p>
<p>-U        解除锁定</p>
<p>删除用户</p>
<p>userdel         (保留用户家目录)</p>
<p>userdel -r    (同时删除用户的家目录)</p>
<h4 id="组"><a href="#组" class="headerlink" title="组"></a>组</h4><p>每个组有一个组ID</p>
<p>组信息保存在/etc/group中</p>
<p>每个用户拥有一个主组,同时还可以拥有最对31个附属组</p>
<p>命令groupadd用以创建组:</p>
<p>​    groupadd  linuxcast(组名)</p>
<p>命令groupmod用以修改组信息</p>
<p>​    groupmod    -n    newname oldname    修改组名</p>
<p>​    groupmod    -g    newGid    oldGid        修改组ID</p>
<p>命令groupdel用以删除组</p>
<p>​    groupdel    linuxcast</p>
<h3 id="权限"><a href="#权限" class="headerlink" title="权限"></a>权限</h3><p>文件权限</p>
<p>linux中每个文件拥有三种权限</p>
<p>r(读取)</p>
<p>w(写入)</p>
<p>x(执行)</p>
<p>目录必须拥有X权限否则无法查看其内容</p>
<h4 id="UGO"><a href="#UGO" class="headerlink" title="UGO"></a>UGO</h4><p>linux权限是基于UGO模型进行控制的</p>
<p>U代表User    G代表Group    O代表Other</p>
<p>每一个文件的权限基于UGO进行设置</p>
<p>权限三个一组(rwx),对应UGO分别设置</p>
<p>每个文件拥有一个所属用户和一个所属组,对应UG,不属于该文件所属用户或所属组的使用O权限</p>
<p>命令ls -l 可以查看当前目录下的文件详细信息</p>
<h4 id="修改文件所属用户-组"><a href="#修改文件所属用户-组" class="headerlink" title="修改文件所属用户,组"></a>修改文件所属用户,组</h4><p>命令chown用以改变文件的所属用户</p>
<p>​    chown    用户名    文件名</p>
<p>​    -R参数递归的修改目录下的所有文件的所属用户</p>
<p>命令chgrp用以修改文件的所属组</p>
<p>​    chgrp    组名    文件名</p>
<p>-R参数递归的修改目录下的所有文件的所属组</p>
<h4 id="修改权限"><a href="#修改权限" class="headerlink" title="修改权限"></a>修改权限</h4><p>命令chmod用以修改文件的权限</p>
<p>​    chmod    模式    文件</p>
<p>模式为如下格式</p>
<p>u,    g,    o分别代表用户,组,和其他</p>
<p>a可以代指ugo</p>
<p>+    -    代表加入或删除对应权限</p>
<p>r    w    x代表三种权限</p>
<p>示例</p>
<p>chmod u+rw    文件</p>
<p>chmod go+rw    文件</p>
<p>chmod    a+rw    文件</p>
<p>命令chmod也支持以数字方式修改权限,三个权限分别有三个数字表示</p>
<p>r = 4    (2^2)</p>
<p>w = 2    (2^1)</p>
<p>x = 1    (2^0)</p>
<p>示例</p>
<p>chmod    660            ==     rw-rw—-</p>
<p>chmod    775            ==    rwxrwxrw-</p>
<h4 id="默认权限"><a href="#默认权限" class="headerlink" title="默认权限"></a>默认权限</h4><p>新建文件默认权限</p>
<p>rw-rw-r–</p>
<p>新建文件夹默认权限</p>
<p>rwxrwxr-x</p>
<p>每个终端都拥有一个umask属性,来确定新建文件,新建文件夹的默认属性</p>
<p>umask使用数字权限方式表示;    如022(其实umask值有4位第一位保存特殊权限)</p>
<p>目录的默认权限是777-umask</p>
<p>文件的默认权限是666-umask</p>
<p>普通用户的默认umask为002,root用户的默认umask为022</p>
<p>命令umask用来查看设置umask值</p>
<p>umask    022</p>
<h4 id="特殊权限"><a href="#特殊权限" class="headerlink" title="特殊权限"></a>特殊权限</h4><p>除普通权限外还有三个默认权限</p>
<p>suid    以文件的所属用户身份去执行而不是执行用户</p>
<p>文件设置了suid权限后  rwx会变为rws</p>
<p>sgid        以文件所属组身份运行        在该目录中创建的文件继承该目录的所属组</p>
<p>sticky                            对目录用于写权限的用户,仅可以删除其拥有的文件,无法删除其他人拥有的文件</p>
<p>设置特殊权限</p>
<p>设置suid</p>
<p>chmod    u+s    文件</p>
<p>设置sgid</p>
<p>chmod    g+s 文件</p>
<p>设置sticky</p>
<p>chmod o+t    文件</p>
<p>与普通权限一样特殊权限也可以使用数字方式表示</p>
<p>suid = 4</p>
<p>sgid = 2</p>
<p>sticky = 1</p>
<p>例如</p>
<p>chmod    4755 文件</p>
<h2 id="网络基本配置"><a href="#网络基本配置" class="headerlink" title="网络基本配置"></a>网络基本配置</h2><p>基本网络参数</p>
<p>要配置一个局域网通信的主机</p>
<p>​    –ip地址</p>
<p>​    –子网掩码</p>
<p>要配置一个跨网段通信的计算机</p>
<p>​    –ip地址</p>
<p>​    –子网掩码</p>
<p>​    –网关</p>
<p>要配置一个可上网的计算机</p>
<p>​    –ip地址</p>
<p>​    –子网掩码</p>
<p>​    –网关</p>
<p>​    –DNS</p>
<h2 id="管道-重定向"><a href="#管道-重定向" class="headerlink" title="管道,重定向"></a>管道,重定向</h2><h2 id="linux系统启动详解"><a href="#linux系统启动详解" class="headerlink" title="linux系统启动详解"></a>linux系统启动详解</h2><h2 id="软件管理"><a href="#软件管理" class="headerlink" title="软件管理"></a>软件管理</h2><h2 id="linux目录架构"><a href="#linux目录架构" class="headerlink" title="linux目录架构"></a>linux目录架构</h2><p><strong>bin</strong>(binary缩写)    <strong>:</strong>    所有用户可运行的二进制的可执行文件</p>
<p><strong>boot</strong>(启动,引导)    <strong>:</strong>    引导目录 ;启动和驱动的文件都在这里包括         </p>
<p>​                    linux内核文件</p>
<p><strong>dev</strong>(device缩写)         <strong>:</strong> 保存计算机上面的所有硬件设备的信息</p>
<p><strong>etc</strong>                <strong>:</strong>    所有配置信息    </p>
<p><strong>home</strong>            <strong>:</strong>    保存用户信息 用户私有文件</p>
<p>root用户有个单独的root目录在根目录下</p>
<p><strong>lib</strong>(library缩写)    <strong>:</strong>    存放库文件</p>
<p><strong>opt</strong>                <strong>:</strong>    系统默认存放大型文件(初始为空)</p>
<p><strong>mnt    **        **:</strong>     挂载</p>
<p><strong>proc</strong>            <strong>:</strong>    系统实时信息(不存在于硬盘中)只存在内存     中</p>
<p><strong>sbin</strong>            <strong>:</strong>    root用户可运行的二进制执行文件</p>
<p>sys                     :    包含底层硬件信息</p>
<p>tmp                :    存放临时文件(系统隔段时间会自动删除) </p>
<p>usr                :    应用软件默认存放</p>
<p>var              :    存放经常变动的文件(例如日志文件) </p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://djf-github.github.io/2018/06/07/SpringMVC/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="djf">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="我要养只大熊猫">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/06/07/SpringMVC/" class="post-title-link" itemprop="url">SpringMvc 笔记</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-06-07 20:07:23" itemprop="dateCreated datePublished" datetime="2018-06-07T20:07:23+08:00">2018-06-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-03-09 02:23:03" itemprop="dateModified" datetime="2020-03-09T02:23:03+08:00">2020-03-09</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Spring/" itemprop="url" rel="index"><span itemprop="name">Spring</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="SpringMVC"><a href="#SpringMVC" class="headerlink" title="SpringMVC"></a>SpringMVC</h1><h2 id="导入jar包"><a href="#导入jar包" class="headerlink" title="导入jar包"></a>导入jar包</h2><ol>
<li>Spring-aop</li>
<li>Spring-beans</li>
<li>Spring-context</li>
<li>Spring-core</li>
<li>Spring-expression</li>
<li>commons-loggings</li>
<li>Spring-web</li>
<li>–mvc的依赖jar包</li>
<li>Spring-webmvc</li>
<li>jstl</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloControll</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="meta">@RequestMapping</span>(<span class="string">"hello"</span>)</span><br><span class="line">	<span class="function"><span class="keyword">public</span> 		ModelAndView <span class="title">hello</span><span class="params">()</span></span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"hello Springmvc---------"</span>);</span><br><span class="line">		ModelAndView mav = <span class="keyword">new</span> ModelAndView();</span><br><span class="line">		<span class="comment">//设置模型数据,用于传递到jsp</span></span><br><span class="line">		mav.addObject(<span class="string">"msg"</span>, <span class="string">"hello  SpringMVC---"</span>);</span><br><span class="line">		<span class="comment">//设置视图名字用于响应用户</span></span><br><span class="line">		mav.setViewName(<span class="string">"/WEB-INF/jsp/hllo.jsp"</span>);</span><br><span class="line">		<span class="keyword">return</span> mav;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><h3 id="springmvc-xml基本配置"><a href="#springmvc-xml基本配置" class="headerlink" title="springmvc.xml基本配置"></a>springmvc.xml基本配置</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="attr">xmlns:p</span>=<span class="string">"http://www.springframework.org/schema/p"</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:mvc</span>=<span class="string">"http://www.springframework.org/schema/mvc"</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.0.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-4.0.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.0.xsd"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"包全路径名"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h3 id="web-xml配置"><a href="#web-xml配置" class="headerlink" title="web.xml配置"></a>web.xml配置</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="attr">xmlns</span>=<span class="string">"http://java.sun.com/xml/ns/javaee"</span> <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"</span> <span class="attr">id</span>=<span class="string">"WebApp_ID"</span> <span class="attr">version</span>=<span class="string">"3.0"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">display-name</span>&gt;</span>SpringMVC<span class="tag">&lt;/<span class="name">display-name</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment">&lt;!-- 核心控制器的配置 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span> org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>0<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">      </span><br><span class="line">      <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">  		<span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">  		<span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:springmvc.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">  	<span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*.action<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="mvc三大组件配置"><a href="#mvc三大组件配置" class="headerlink" title="mvc三大组件配置"></a>mvc三大组件配置</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 配置处理器映射器 --&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- &lt;bean class="org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping"/&gt; --&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 配置处理器适配器--&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- &lt;bean class="org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter"/&gt; --&gt;</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">&lt;!-- 配置注解驱动，相当于同时使用最新处理器映射跟处理器适配器,对json数据响应提供支持 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">mvc:annotation-driven</span> /&gt;</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">&lt;!-- 配置视图解析器 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.web.servlet.view.InternalResourceViewResolver"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"prefix"</span> <span class="attr">value</span>=<span class="string">"/WEB-INF/jsp/"</span>/&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"suffix"</span> <span class="attr">value</span>=<span class="string">".jsp"</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="参数传递"><a href="#参数传递" class="headerlink" title="参数传递"></a>参数传递</h2><p>处理器(controll)形参中添加如下类型的参数,处理器会默认识别并进行赋值</p>
<ul>
<li>HttpServletRequest</li>
<li>HttpServletResponse</li>
<li>HttpServletSession</li>
</ul>
<ul>
<li>Model/ModelMap(两个效果相同,后者为前者的实现类,,返回数据模型)</li>
</ul>
<h3 id="简单参数"><a href="#简单参数" class="headerlink" title="简单参数"></a>简单参数</h3><p>方法直接写一个形参来接受就可以</p>
<p>例如页面传递过来一个int型id</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public String getXxxById(Model model, Integer id)</span><br><span class="line">&#123;</span><br><span class="line">    Xxx xxx &#x3D; service.getXxxById(id);</span><br><span class="line">    model.addAttribute(&quot;xxx&quot;,xxx);</span><br><span class="line">    return &quot;视图名称&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果实参和提交的参数名字不一致</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getXxxById</span><span class="params">(Model model,@Requestparam(<span class="string">"页面传递参数名字"</span>)</span> Integer xxx)</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getXxxById</span><span class="params">(Model model,@Requestparam(value=<span class="string">"id"</span>,required=<span class="keyword">true</span>)</span> Integer xxx)</span></span><br><span class="line"><span class="function">    <span class="comment">//指定页面必须提交参数,否则抛异常,默认为false</span></span></span><br><span class="line"><span class="function"><span class="comment">//设置默认值</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getXxxById</span><span class="params">(Model model,@Requestparam(value=<span class="string">"id"</span>,required=<span class="keyword">true</span>,defaultValue=<span class="string">"1"</span>)</span> Integer xxx)</span></span><br></pre></td></tr></table></figure>

<h3 id="pojo参数"><a href="#pojo参数" class="headerlink" title="pojo参数"></a>pojo参数</h3><p>和上面一样直接使用形参接受</p>
<h3 id="数组和集合参数"><a href="#数组和集合参数" class="headerlink" title="数组和集合参数"></a>数组和集合参数</h3><h2 id="RequestMapping注解的使用"><a href="#RequestMapping注解的使用" class="headerlink" title="@RequestMapping注解的使用"></a>@RequestMapping注解的使用</h2><ol>
<li><p>@RequestMapping(value={“xxx”,”xxx2”})</p>
<p>配置多个请求地址</p>
</li>
<li><p>@RequestMapping(“aaa”)在类前面</p>
<p>分目录管理,此时请求地址为 /aaa/xxx</p>
</li>
<li><p>@RequestMapping(method={RequestMethod.POST,RequestMethod.POST,})</p>
<p>请求方法限定,默认支持所有请求,值可以为一个,也可以为多个</p>
</li>
</ol>
<h2 id="Contorller方法返回值"><a href="#Contorller方法返回值" class="headerlink" title="Contorller方法返回值"></a>Contorller方法返回值</h2><p>ModelAndView</p>
<p>通过ModelAndView的对象添加响应内容然后直接返回,MVC的视图解析器</p>
<p>String</p>
<p>返回一个视图(常见的JSP等)的名称,Model添加响应内容</p>
<p>void</p>
<p>通过request和response响应</p>
<h2 id="其他知识点"><a href="#其他知识点" class="headerlink" title="其他知识点"></a>其他知识点</h2><h3 id="异常处理"><a href="#异常处理" class="headerlink" title="异常处理"></a>异常处理</h3><p>思想:做一个全局异常处理器,处理所有没有处理过的运行时异常用于更友好的提示用户</p>
<p>新建一个java类实现一个接口HandelExceptionResolver实现它的resolveException方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyExceptionResolver</span> <span class="keyword">implements</span> <span class="title">HandelExceptionResolver</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span>  ModelAndView <span class="title">resolveException</span><span class="params">(request,response,Object handler,Exception ex)</span></span>&#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在SpringMVC.xml中配置</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置全局异常处理器--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"MyExceptionResolver"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>更友好的处理方式</p>
<p>自定义一个异常类继承Exception</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyException</span> <span class="keyword">extends</span> <span class="title">Exception</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String msg;</span><br><span class="line">    <span class="comment">//提供set和get方法</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="图片上传"><a href="#图片上传" class="headerlink" title="图片上传"></a>图片上传</h3><p>配置多媒体处理器</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置多媒体处理器--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"multipartResolver"</span> <span class="attr">class</span>=<span class="string">"CommonsMultipartResolver"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--配最大上传文件大小--&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"maxUploadSize"</span> <span class="attr">value</span>=<span class="string">"字节为单位"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getXxxById</span><span class="params">(MultipartFile picturefile,Item item)</span><span class="comment">//接收图片文件</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//为了防止名称重复</span></span><br><span class="line">    String newname = UUID.randomUUID.toString();</span><br><span class="line">    <span class="comment">//得到文件的全名</span></span><br><span class="line">   String oldname =  picturefile.getOriginalFilename();</span><br><span class="line">    <span class="comment">//得到后缀</span></span><br><span class="line">    String sux = oldname.substring(oldname.lastIndexOf(<span class="string">"."</span>));</span><br><span class="line">    File file = <span class="keyword">new</span> File(<span class="string">"路径/"</span>+newname+sux);</span><br><span class="line">    picturefile.transferTo(file);</span><br><span class="line">    </span><br><span class="line">    item.setPic(newname+sux);</span><br><span class="line">    itemService.updateItem(item);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="JSON数据交互"><a href="#JSON数据交互" class="headerlink" title="JSON数据交互"></a>JSON数据交互</h3><p>导入jar包</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ResponseBody</span><span class="comment">//响应json数据</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Item <span class="title">getItem</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Item item = itemService.getItem();</span><br><span class="line">    <span class="keyword">return</span> item</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> Item <span class="title">getItem</span><span class="params">(@ResponseBody Item item)</span></span>&#123;</span><br><span class="line">  <span class="comment">//接受json数据</span></span><br><span class="line">    <span class="keyword">return</span> item;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 配置注解驱动，相当于同时使用最新处理器映射跟处理器适配器,对json数据响应提供支持 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!--使用自定义转换器--&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">mvc:annotation-driven</span> <span class="attr">conversion-service</span>=<span class="string">"MyConvert"</span>/&gt;</span></span><br></pre></td></tr></table></figure>



<h3 id="SpringMVC实现-RESULTful"><a href="#SpringMVC实现-RESULTful" class="headerlink" title="SpringMVC实现 RESULTful"></a>SpringMVC实现 RESULTful</h3><p>一个URL的风格</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"item/&#123;id&#125;"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">itemQuery</span><span class="params">(@PathVariable Integer id)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="拦截器"><a href="#拦截器" class="headerlink" title="拦截器"></a>拦截器</h3><p>创建拦截器</p>
<p>新建一个类实现一个HandlerInterceptor接口</p>
<p>三个方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//方法执行之后被执行</span></span><br><span class="line"><span class="comment">//处理异常,清资源,记录日志等</span></span><br><span class="line"><span class="comment">//只要放行了这个方法必被执行</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterCompletion</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="comment">//方法执行之后,方法modelview之前执行</span></span></span><br><span class="line"><span class="function">    <span class="comment">//设置页面的共用参数等</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">poatHandle</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">    </span></span><br><span class="line"><span class="function"> <span class="comment">//进入方法前被执行</span></span></span><br><span class="line"><span class="function"> <span class="comment">//登录拦截权限验证等</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">preHandle</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    <span class="comment">//true放行flase,拦截</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>配置拦截器</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mvc:interceptors</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--/**表示拦截所有请求,包括二级以上目录</span></span><br><span class="line"><span class="comment">		/*表示拦截所有请求不包括二级目录</span></span><br><span class="line"><span class="comment">	--&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">mvc:mapping</span> <span class="attr">path</span>=<span class="string">"/**"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"拦截器"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mvc:interceptors</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>对个拦截器则根据拦截器的配置顺序来执行</p>
<h3 id="get请求编码问题"><a href="#get请求编码问题" class="headerlink" title="get请求编码问题"></a>get请求编码问题</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--在server.xml中--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Connector</span> <span class="attr">URIEncoding</span>=<span class="string">"utf-8"</span> <span class="attr">port</span>=<span class="string">"8080"</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="表单日期提交"><a href="#表单日期提交" class="headerlink" title="表单日期提交"></a>表单日期提交</h3><p>原理:自定义参数绑定</p>
<p>写一个转换器实现Converter接口(spring核心包里面的)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;**</span><br><span class="line"> * 日期转换器</span><br><span class="line"> * S:source  要转换的源类型</span><br><span class="line"> * T:target  目标类型</span><br><span class="line"> *&#x2F;</span><br><span class="line"></span><br><span class="line">public class DateConvert implements Converter&lt;String, Date&gt; &#123;</span><br><span class="line"></span><br><span class="line">	@Override</span><br><span class="line">	public Date convert(String source) &#123;</span><br><span class="line">		Date result &#x3D; null;</span><br><span class="line">		try &#123;</span><br><span class="line">			SimpleDateFormat sdf &#x3D; new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);</span><br><span class="line">			result &#x3D; sdf.parse(source);</span><br><span class="line">		&#125; catch (ParseException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">		return result;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后配置转换器</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 定义转换器 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"MyConvert"</span></span></span><br><span class="line"><span class="tag">	<span class="attr">class</span>=<span class="string">"org.springframework.format.support.FormattingConversionService"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"DateConvert"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"utils/DateConvert.java"</span>&gt;</span></span><br><span class="line">				</span><br><span class="line">				<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- 配置注解驱动，相当于同时使用最新处理器映射跟处理器适配器,对json数据响应提供支持 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 使用自定义转换器 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">mvc:annotation-driven</span> <span class="attr">conversion-service</span>=<span class="string">"MyConvert"</span>/&gt;</span></span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://djf-github.github.io/2018/06/02/Mybatis/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="djf">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="我要养只大熊猫">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/06/02/Mybatis/" class="post-title-link" itemprop="url">Mybatis 基本知识</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-06-02 17:00:21" itemprop="dateCreated datePublished" datetime="2018-06-02T17:00:21+08:00">2018-06-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-03-09 02:23:07" itemprop="dateModified" datetime="2020-03-09T02:23:07+08:00">2020-03-09</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Mybatis/" itemprop="url" rel="index"><span itemprop="name">Mybatis</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Mybatis"><a href="#Mybatis" class="headerlink" title="Mybatis"></a>Mybatis</h1><p>持久层的框架</p>
<p>导入jar包</p>
<h2 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h2><p>SqlMapConfig</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span> <span class="meta">&lt;!DOCTYPE <span class="meta-keyword">configuration</span>  <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Config 3.0//EN"</span>  <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-config.dtd"</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span>  </span><br><span class="line">    <span class="comment">&lt;!---先加载内部标签,再加载外部文件,名称一致时会替换--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span> <span class="attr">resource</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">"development"</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">"development"</span>&gt;</span>     </span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">"JDBC"</span>/&gt;</span>      </span><br><span class="line">            	<span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">"POOLED"</span>&gt;</span>        </span><br><span class="line">                    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driver"</span> <span class="attr">value</span>=<span class="string">"$&#123;driver&#125;"</span>/&gt;</span>        </span><br><span class="line">                    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">"$&#123;url&#125;"</span>/&gt;</span>        </span><br><span class="line">                    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"$&#123;username&#125;"</span>/&gt;</span>        </span><br><span class="line">                    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"$&#123;password&#125;"</span>/&gt;</span>      </span><br><span class="line">            	<span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span>    </span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span>  </span><br><span class="line">   </span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>log4j.properties</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Global logging configuration</span></span><br><span class="line"><span class="meta">log4j.rootLogger</span>=<span class="string">DEBUG,stdout</span></span><br><span class="line"><span class="comment"># Console output...</span></span><br><span class="line"><span class="meta">log4j.appender.stdout</span>=<span class="string">org.apache.log4j.ConsoleAppender</span></span><br><span class="line"><span class="meta">log4j.appender.stdout.layout</span>=<span class="string">org.apache.log4j.PatternLayout</span></span><br><span class="line"><span class="meta">log4j.appender.stdout.layout.ConversionPattern</span>=<span class="string">%5p[%t]-%m%n</span></span><br></pre></td></tr></table></figure>

<p>user.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span> <span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span>  <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Mapper 3.0//EN"</span>  <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span>&gt;</span> </span><br><span class="line"><span class="comment">&lt;!--namespace用来隔离sal语句,一般值是全路径名--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"org.mybatis.example.BlogMapper"</span>&gt;</span> </span><br><span class="line">    <span class="comment">&lt;!--id是sql语句的唯一标识</span></span><br><span class="line"><span class="comment">	#&#123;&#125;是一个占位符相当于jdbc的?</span></span><br><span class="line"><span class="comment">	--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectBlog"</span> <span class="attr">resultType</span>=<span class="string">"Blog"</span> <span class="attr">parameterType</span>=<span class="string">"String"</span>&gt;</span>    </span><br><span class="line">        select * from Blog where id = #&#123;id&#125;  </span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span> </span><br><span class="line">    <span class="comment">&lt;!--$&#123;&#125;是字符串拼接指令,如果入参为普通类型,&#123;&#125;内只能写value--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectList"</span> <span class="attr">resultType</span>=<span class="string">"User"</span> <span class="attr">parameterType</span>=<span class="string">"String"</span>&gt;</span>    </span><br><span class="line">        select * from Blog where username like '%$&#123;value&#125;%'</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">"insertBlog"</span> <span class="attr">parameterType</span>=<span class="string">"User"</span>&gt;</span>    </span><br><span class="line">        insert into user (username,birthday,,sex,address)</span><br><span class="line">        values(#&#123;username&#125;</span><br><span class="line">        #&#123;birthday&#125;</span><br><span class="line">        #&#123;sex&#125;</span><br><span class="line">        #&#123;address&#125;)  </span><br><span class="line">    <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">update</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br><span class="line">//如果返回结果为集合时只需设置resultType为每一个元素的类型就可以</span><br></pre></td></tr></table></figure>

<h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testGetUserByid</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">		<span class="comment">// 创建SqlSessionFactoryBuilder对象</span></span><br><span class="line">		SqlSessionFactoryBuilder sfb = <span class="keyword">new</span> SqlSessionFactoryBuilder();</span><br><span class="line">		<span class="comment">// 查找配置文件创建输入流</span></span><br><span class="line">		InputStream inputStream = Resources.getResourceAsStream(<span class="string">"SqlMapConfig.xml"</span>);</span><br><span class="line">			<span class="comment">// 加载配置文件，创建SqlSessionFactory对象</span></span><br><span class="line">		SqlSessionFactory	sqlSessionFactory = sfb.build(inputStream);</span><br><span class="line">		<span class="comment">// 创建SqlSession对象</span></span><br><span class="line">		SqlSession sqlSession = sqlSessionFactory.openSession(<span class="keyword">true</span>);<span class="comment">//参数true表示自动提交,默认false</span></span><br><span class="line">		<span class="comment">// 执行查询，参数一：要查询的sql语句Id ,参数二：sql语句入参</span></span><br><span class="line">		User user = sqlSession.selectOne(<span class="string">"user.getUserById"</span>, <span class="number">1</span>);</span><br><span class="line">		<span class="comment">// 输出查询结果</span></span><br><span class="line">		System.out.println(user);</span><br><span class="line">        <span class="comment">//提交</span></span><br><span class="line">        sqlSession.commit();</span><br><span class="line">		<span class="comment">// 释放资源</span></span><br><span class="line">		sqlSession.close();</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">selectKey:主键返回</span></span><br><span class="line"><span class="comment">ketProperty:主键属性</span></span><br><span class="line"><span class="comment">resultType:主键数据类型</span></span><br><span class="line"><span class="comment">order:何时执行,有before和after两个值</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">selectKey</span> <span class="attr">ketProperty</span>=<span class="string">"id"</span> <span class="attr">resultType</span>=<span class="string">"int"</span> <span class="attr">order</span>=<span class="string">"After"</span>&gt;</span></span><br><span class="line">    select LAST_INSERT_ID()</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">selectKey</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="传统DAO"><a href="#传统DAO" class="headerlink" title="传统DAO"></a>传统DAO</h2><p>创建接口</p>
<p>创建实现类</p>
<p>在实现类里面通过SqlSession的方法的参数传入映射文件的sql语句的id来调用</p>
<h2 id="动态代理DAO"><a href="#动态代理DAO" class="headerlink" title="动态代理DAO"></a>动态代理DAO</h2><p>开发规则</p>
<ol>
<li>namespace必须是接口的全路径</li>
<li>接口的方法名必须与sql的id一致</li>
<li>接口的入参必须与parameterTypy一致</li>
<li>接口的返回值必须与resultType一致</li>
</ol>
<p>获取接口的代理实现类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UserMapper userMapper = sqlSession.getMapper(UserMapper.calss)</span><br></pre></td></tr></table></figure>



<h2 id="别名"><a href="#别名" class="headerlink" title="别名"></a>别名</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--包扫描,使用之后,别名是类的全称,不区分大小写,推荐方式--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">"包名"</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--单个类别名配置--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--不区分大小写--&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">type</span>=<span class="string">"类的全路径名"</span> <span class="attr">alias</span>=<span class="string">"自定义别名"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="加载映射文件"><a href="#加载映射文件" class="headerlink" title="加载映射文件"></a>加载映射文件</h2><p>1.路径加载</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span>    </span><br><span class="line">   	<span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">"org/mybatis/example/BlogMapper.xml"</span>/&gt;</span>  //对应user.xml的nameSpace</span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p>动态代理还有两个加载方式</p>
<p>2.classs扫描</p>
<ul>
<li>接口文件必须与映射文件在同一目录下</li>
<li>接口名称必须与映射文件名称一致</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;mappers&gt;    </span><br><span class="line">    	&lt;mapper class&#x3D;&quot;全路径&quot;&#x2F;&gt;  &#x2F;&#x2F;</span><br><span class="line"> &lt;&#x2F;mappers&gt;</span><br></pre></td></tr></table></figure>

<p>3.package扫描(推荐方式)</p>
<ul>
<li>接口文件必须与映射文件在同一目录下</li>
<li>接口名称必须与映射文件名称一致</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;mappers&gt;    </span><br><span class="line">    	&lt;mapper class&#x3D;&quot;包名&quot;&#x2F;&gt;  &#x2F;&#x2F;</span><br><span class="line"> &lt;&#x2F;mappers&gt;</span><br></pre></td></tr></table></figure>



<h2 id="一对一查询"><a href="#一对一查询" class="headerlink" title="一对一查询"></a>一对一查询</h2><p>resultType</p>
<p>新建一个类继承于主表</p>
<p>添加关联的属性</p>
<p>所有查出来的可以表的列可以和属性一一映射</p>
<p>然后resultType等于这个新建类</p>
<p>resultMap</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">type</span>=<span class="string">""</span> <span class="attr">id</span>=<span class="string">"www"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--id用于映射主键--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">""</span> <span class="attr">colum</span>=<span class="string">""</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--result用于映射普通属性--&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"属性名"</span> <span class="attr">colum</span>=<span class="string">"列名"</span>/&gt;</span></span><br><span class="line">    ...</span><br><span class="line">    <span class="comment">&lt;!--association用于配置一对一映射--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">"属性"</span> <span class="attr">javaType</span>=<span class="string">"对应的类的全路径名或者别名"</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">id</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">seslect</span> <span class="attr">id</span>=<span class="string">""</span> <span class="attr">resultMap</span>=<span class="string">"www"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">seslect</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="一对多查询"><a href="#一对多查询" class="headerlink" title="一对多查询"></a>一对多查询</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">type</span>=<span class="string">""</span> <span class="attr">id</span>=<span class="string">"www"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--id用于映射主键--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">""</span> <span class="attr">colum</span>=<span class="string">""</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--result用于映射普通属性--&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"属性名"</span> <span class="attr">colum</span>=<span class="string">"列名"</span>/&gt;</span></span><br><span class="line">    ...</span><br><span class="line">    <span class="comment">&lt;!--connection--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">connection</span> <span class="attr">property</span>=<span class="string">"属性"</span> <span class="attr">ofType</span>=<span class="string">"对应的类的全路径名或者别名"</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">id</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">connection</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">seslect</span> <span class="attr">id</span>=<span class="string">""</span> <span class="attr">resultMap</span>=<span class="string">"www"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">seslect</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="mybatis与Spring整合"><a href="#mybatis与Spring整合" class="headerlink" title="mybatis与Spring整合"></a>mybatis与Spring整合</h2><p>导入整合jar包</p>
<p>配置Spring配置文件</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--SqlSessionFactory配置--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"SqlSessionFactory"</span> <span class="attr">class</span>=<span class="string">"SqlSessionFactory的全路径名"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span><span class="attr">ref</span>=<span class="string">"dataSource"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--加载mybatis核心配置文件--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"configLocation"</span> <span class="attr">value</span>=<span class="string">"classpath:xxx.xml"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--配置别名包扫描,多个包用逗号分隔--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"typeAliasesPackage"</span> <span class="attr">value</span>=<span class="string">"包名"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p>传统Dao</p>
<p>创建Dao实现Dao接口并继承SqlSessionDaoSupport</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public class DaoImpl extends SqlSessionDaoSupport implements Dao&#123;</span><br><span class="line">    SqlSession sqlSession &#x3D; super.getSqlSession();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>动态代理(官方推荐)</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"MapperFactoryBea"</span> <span class="attr">class</span>=<span class="string">"MapperFactoryBean"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"sqlSessionFactory"</span> <span class="attr">ref</span>=<span class="string">"sqlSessionFactory"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"oneMapper"</span> <span class="attr">parent</span>=<span class="string">"MapperFactoryBea"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--配置一个接口 对应class扫描--&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"mapperInterface"</span> <span class="attr">value</span>=<span class="string">"接口的全路径名 或别名"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"twoMapper"</span> <span class="attr">parent</span>=<span class="string">"MapperFactoryBea"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--官方推荐  包扫描--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"MapperScannerConfigure的全路径或别名"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"basePackage"</span> <span class="attr">value</span>=<span class="string">"包名"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="逆向工程"><a href="#逆向工程" class="headerlink" title="逆向工程"></a>逆向工程</h2>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://djf-github.github.io/2018/05/31/Spring/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="djf">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="我要养只大熊猫">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/05/31/Spring/" class="post-title-link" itemprop="url">Spring 笔记</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-05-31 22:37:54" itemprop="dateCreated datePublished" datetime="2018-05-31T22:37:54+08:00">2018-05-31</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-03-09 02:23:05" itemprop="dateModified" datetime="2020-03-09T02:23:05+08:00">2020-03-09</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Spring/" itemprop="url" rel="index"><span itemprop="name">Spring</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Spring"><a href="#Spring" class="headerlink" title="Spring"></a>Spring</h1><p>目前版本 3.x,4.x</p>
<h2 id="Spring整合Junit测试"><a href="#Spring整合Junit测试" class="headerlink" title="Spring整合Junit测试"></a>Spring整合Junit测试</h2><p>导包Spring- test</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">@RunWith(SpringJUnit4ClassRunner.class)</span><br><span class="line">@ContextConfiguration(&quot;classpth:applicationContext.xml&quot;)</span><br><span class="line">public class Demo&#123;</span><br><span class="line">    @Resource(name&#x3D;&quot;userDao&quot;)</span><br><span class="line">    paivate	UserDao userDao</span><br><span class="line">    @Test</span><br><span class="line">    public void demo()&#123;</span><br><span class="line">        userDao.方法();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="IOC"><a href="#IOC" class="headerlink" title="IOC"></a>IOC</h2><p>概念:控制反转,把对象的创建交给Spring</p>
<h3 id="导包"><a href="#导包" class="headerlink" title="导包:"></a>导包:</h3><p>spring-beans-4.2.4.RELEASE.jar</p>
<p>spring-context-4.2.4.RELEASE.jar</p>
<p>spring-core-4.2.4.RELEASE.jar</p>
<p>spring-expression-4.2.4.RELEASE.jar</p>
<p>日志包</p>
<p>commons-logging-1.2.jar</p>
<p>com.springsource.org.apache.log4j-1.2.15.jar</p>
<h3 id="XML配置"><a href="#XML配置" class="headerlink" title="XML配置"></a>XML配置</h3><p>默认配置文件</p>
<p>applicationContext.xml</p>
<p>需要引入beans约束</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;beans 引入约束&gt;</span><br><span class="line">	&lt;bean id&#x3D;&quot;自定义名字&quot; class&#x3D;&quot;包名.类名&quot;&gt;			  &lt;&#x2F;bean&gt;</span><br><span class="line">&lt;&#x2F;beans&gt;</span><br></pre></td></tr></table></figure>

<p>调用</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">    ApplicationContext applicationContext = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"配置文件名"</span>);</span><br><span class="line">    类 引用(实例对象名) = applicationContext.getBean(<span class="string">"配置文件的id值"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="DI-依赖注入"><a href="#DI-依赖注入" class="headerlink" title="DI(依赖注入)"></a>DI(依赖注入)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean&gt;</span><br><span class="line">	&lt;property name&#x3D;&quot;属性名&quot; value&#x3D;&quot;属性值&quot;&#x2F;&gt;</span><br><span class="line">&lt;&#x2F;bean&gt;</span><br></pre></td></tr></table></figure>

<h4 id="两个工厂类"><a href="#两个工厂类" class="headerlink" title="两个工厂类"></a>两个工厂类</h4><p>BeanFactory:</p>
<p>旧版本的,getBean的时候才会生成类的实例</p>
<p>ApplicationContext:</p>
<p>新版本的,加载配置文件的时候就会生成类的实例</p>
<p>它有两个实现类</p>
<p>ClassPathXmlApplicationContext:</p>
<p>加载类路径下的配置文件(src目录下)</p>
<p>FileSystemXmlApplicationContext:</p>
<p>加载文件系统下的配置文件</p>
<h4 id="Bean的相关配置"><a href="#Bean的相关配置" class="headerlink" title="Bean的相关配置"></a>Bean的相关配置</h4><p>id和name的区别</p>
<p>id使用了唯一约束 不能有特殊字符</p>
<p>name没有唯一约束,(理论上可以有相同值)</p>
<p>,实际开发中一般没有 可以有特殊字符</p>
<p>Bean的生命周期的配置:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean&gt;</span><br><span class="line">	&lt;property init-method&#x3D;&quot;&quot; destroy-method&#x3D;&quot;&quot;&#x2F;&gt;</span><br><span class="line">&lt;&#x2F;bean&gt;</span><br></pre></td></tr></table></figure>

<p>init-method     :Bean被初始化的时候调用的方法</p>
<p>destroy-method    :Bean被销毁的时候执行的方法</p>
<p>Bean是单例而且工厂被关闭才会被销毁</p>
<p>scope :Bean的作用范围</p>
<p>–singleton    :默认的,单例模式</p>
<p>–prototype    :多例模式</p>
<p>–request    :创建实例后存入request域中</p>
<p>–session    :创建实例后存入session域中</p>
<p>–globalsession    :创建实例后存入全局session中</p>
<h4 id="属性注入"><a href="#属性注入" class="headerlink" title="属性注入"></a>属性注入</h4><p>构造方法注入</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean&gt;</span><br><span class="line">	&lt;constructor-arg name&#x3D;&quot;属性名&quot; value&#x3D;&quot;属性值&#x2F;&gt;&quot;</span><br><span class="line">&lt;&#x2F;bean&gt;</span><br></pre></td></tr></table></figure>

<p>set注入</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean&gt;</span><br><span class="line">	&lt;property name&#x3D;&quot;属性名&quot; value&#x3D;&quot;属性值&quot;&#x2F;&gt;</span><br><span class="line">&lt;&#x2F;bean&gt;</span><br></pre></td></tr></table></figure>

<p>对象类型属性注入</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean&gt;</span><br><span class="line">	&lt;property name&#x3D;&quot;属性名&quot; ref&#x3D;&quot;对象id&quot;&#x2F;&gt;</span><br><span class="line">&lt;&#x2F;bean&gt;</span><br></pre></td></tr></table></figure>

<p>P名称空间属性注入(2.5版本以后)</p>
<p>写法:</p>
<p>普通属性        p属性名=”值”;</p>
<p>对象属性        p:属性名-ref=”值”;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean p:属性名&#x3D;&quot;属性值&quot; &gt;</span><br><span class="line">&lt;&#x2F;bean&gt;</span><br></pre></td></tr></table></figure>

<p>SpEL属性注入(3.0棒棒棒以后)</p>
<p>#{}</p>
<p>示例:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>集合类型属性注入</p>
<p>List集合或数组</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean&gt;</span><br><span class="line">	&lt;property name&#x3D;&quot;引用名&quot;&gt;</span><br><span class="line">		&lt;list&gt;</span><br><span class="line">			&lt;value&gt;值&lt;&#x2F;value&gt;</span><br><span class="line">			&lt;ref&#x2F;&gt;</span><br><span class="line">		&lt;&#x2F;list&gt;</span><br><span class="line">	&lt;&#x2F;property&gt;</span><br><span class="line">&lt;&#x2F;bean&gt;</span><br></pre></td></tr></table></figure>

<p>Map集合</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean&gt;</span><br><span class="line">	&lt;property name&#x3D;&quot;引用名&quot;&gt;</span><br><span class="line">		&lt;Map&gt;</span><br><span class="line">			&lt;entry key&#x3D;&quot;&quot; value&#x3D;&quot;&quot;&#x2F;&gt;</span><br><span class="line">		&lt;&#x2F;Map&gt;</span><br><span class="line">	&lt;&#x2F;property&gt;</span><br><span class="line">&lt;&#x2F;bean&gt;</span><br></pre></td></tr></table></figure>

<p>分模块开发</p>
<p>加载配置文件的时候加载多个:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ApplicationContext applicationContext = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"配置文件名1"</span>,<span class="string">"配置文件名2"</span>);</span><br></pre></td></tr></table></figure>



<p>在一个配置文件中引入多个配置文件</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">import</span>  <span class="attr">resurce</span>=<span class="string">"文件名"</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="注解"><a href="#注解" class="headerlink" title="注解"></a>注解</h3><p>还需要导入aop 的jar包</p>
<p>需要引入context约束</p>
<p>配置</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"src"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context:component-scan</span></span></span><br></pre></td></tr></table></figure>

<p>创建对象</p>
<p>Component</p>
<p>有三个衍生注解(目前功能类似,后期会有扩展)</p>
<p>Controller(修饰web层)</p>
<p>service(修饰service层)</p>
<p>Repository(修饰dao层)</p>
<p>在类上面添加注解</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span>(value=<span class="string">"对象名"</span>)<span class="comment">//value可以省略</span></span><br></pre></td></tr></table></figure>

<p>注入属性</p>
<p>普通属性</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Value</span>(<span class="string">"属性值"</span>)</span><br></pre></td></tr></table></figure>

<p>对象属性</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@Autowried  &#x2F;&#x2F;按照对象类型注入</span><br><span class="line">---------------</span><br><span class="line">@Autowried</span><br><span class="line">@Qualifiler(value&#x3D;&quot;对象名&quot;)&#x2F;&#x2F;按照名称注入</span><br><span class="line">-----------</span><br><span class="line">@Resurce(name&#x3D;&quot;对象名&quot;)&#x2F;&#x2F;按照名称注入</span><br></pre></td></tr></table></figure>

<p>如果没有set方法,在属性上面添加注解</p>
<p>如果有set方法,在方法上添加注解</p>
<p>其他注解</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@PostConstruct</span><br><span class="line">初始化方法</span><br><span class="line">@PreDestroy</span><br><span class="line">销毁方法</span><br><span class="line">@Scope(&quot;&quot;)</span><br></pre></td></tr></table></figure>

<h3 id="XML和注解的比较"><a href="#XML和注解的比较" class="headerlink" title="XML和注解的比较"></a>XML和注解的比较</h3><p>XML:任何场景</p>
<p>–结构清晰,维护方便</p>
<p>注解:有些场景不能使用(例如这个类不是自己提供的)</p>
<p>–开发方便,速度快</p>
<p>XML和注解整合开发</p>
<p>XML管理Bean,注解完成属性注入</p>
<h2 id="AOP"><a href="#AOP" class="headerlink" title="AOP"></a>AOP</h2><p>面向切面编程</p>
<h3 id="底层实现原理"><a href="#底层实现原理" class="headerlink" title="底层实现原理"></a>底层实现原理</h3><p>1.动态代理</p>
<p>JDK动态代理        :只能对实现了接口的类产生代理</p>
<p>Cglib动态代理(第三方代理技术)    :对没有实现接口的类产生代理对象,通过生成子类对象的方式</p>
<p>AOP会自动切换</p>
<p>没有实现接口采用Cglib代理否则使用JDK代理</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">jdkProxy</span> <span class="keyword">implements</span> <span class="title">InvocationHandler</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">jdkProxy</span><span class="params">(UserDao userDao)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.userDao = userDao;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> UserDao <span class="title">createProxy</span><span class="params">()</span></span>&#123;</span><br><span class="line">        UserDao userDaoProxy = 					Proxy.newProxyInstance(userDao.getClass().getClassLoader(),userDao.getClass().getInterfaces(),<span class="keyword">this</span>);</span><br><span class="line">        <span class="keyword">return</span> userDaoProxy;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> object <span class="title">invoke</span><span class="params">(Object proxy,Method method,Object[] args)</span> <span class="keyword">throws</span> Throwable</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="string">"save"</span>.equals(method.getName()))&#123;</span><br><span class="line">            System.out.println(<span class="string">"权限校验"</span>)<span class="string">'</span></span><br><span class="line"><span class="string">                return method.invoke(userDao,args);</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string"> return method.invoke(userDao,args); </span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="AOP相关术语"><a href="#AOP相关术语" class="headerlink" title="AOP相关术语"></a>AOP相关术语</h3><p>joinpoint :连接点</p>
<p>Pointcut:切入点</p>
<p>Advice:(通知/增强)</p>
<p>Introduction :引介</p>
<p>target :目标对象</p>
<p>Weaving :织入</p>
<p>Proxy:代理</p>
<p>Aspect:切面</p>
<h3 id="导包-1"><a href="#导包-1" class="headerlink" title="导包"></a>导包</h3><p>spring-aop-4.2.4.RELEASE.jar</p>
<p>spring-aspects-4.2.4.RELEASE.jar</p>
<p>com.springsource.org.aopalliance-1.0.0.jar</p>
<p>com.springsource.org.aspectj.weaver-1.6.8.RELEASE.jar</p>
<p>配置</p>
<p>引入aop约束</p>
<p>XML方式AOP使用</p>
<p>创建切面类并配置到Spring的Bean管理中</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//切面类</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyAspectXML</span></span>&#123;</span><br><span class="line"><span class="comment">//通知</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">checkPri</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">expession</span>=<span class="string">"execution(切入点)"</span> <span class="attr">id</span>=<span class="string">"qqqq"</span>&gt;</span>	<span class="tag">&lt;/<span class="name">aop:pointcut</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:aspect</span> <span class="attr">ref</span>=<span class="string">"切面类"</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">aop:before</span> <span class="attr">method</span>=<span class="string">""</span> <span class="attr">pointcut-ref</span>=<span class="string">"qqqq"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">aop:aspect</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="通知-增强-的类型"><a href="#通知-增强-的类型" class="headerlink" title="通知(增强)的类型"></a>通知(增强)的类型</h3><p>前置通知</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">aop:before</span> <span class="attr">method</span>=<span class="string">""</span> <span class="attr">point-ref</span>=<span class="string">"切入点配置的id值"</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<p>后置通知</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">aop:after-returing</span> <span class="attr">method</span>=<span class="string">""</span> <span class="attr">point-ref</span>=<span class="string">"切入点配置的id值"</span> <span class="attr">returing</span>=<span class="string">"xx"</span>/&gt;</span></span><br><span class="line">//获取方法返回值</span><br><span class="line">public void 通知(Object xx)&#123;&#125;</span><br></pre></td></tr></table></figure>

<p>环绕通知    :在方法执行之前和之后操作</p>
<p>可以阻止方法的执行</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">aop:around</span> <span class="attr">method</span>=<span class="string">"通知"</span> <span class="attr">point-ref</span>=<span class="string">"切入点配置的id值"</span>/&gt;</span></span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//通知</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Object <span class="title">around</span><span class="params">(ProceedingJoinPoint joinPoint)</span> <span class="keyword">throws</span> Throwable</span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"环绕前通知---"</span>);</span><br><span class="line">    Object object = joinPoint.proced();</span><br><span class="line">    System.out.println(<span class="string">"环绕后通知---"</span>);</span><br><span class="line">    <span class="keyword">return</span> object</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>异常抛出通知:在程序出现异常时操作</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">aop:after-throwing</span> <span class="attr">method</span>=<span class="string">"通知"</span> <span class="attr">point-ref</span>=<span class="string">"切入点配置的id值"</span> <span class="attr">throwing</span>=<span class="string">"ex"</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> 增强(Throwable ex)&#123;</span><br><span class="line">	ex.getmessage</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>最终通知    :总是被执行  和finnally的效果</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;aop:after method&#x3D;&quot;通知&quot; point-ref&#x3D;&quot;切入点配置的id值&quot;&#x2F;&gt;</span><br></pre></td></tr></table></figure>

<p>引介通知</p>
<p>获得切入点信息</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public void 通知(Joinpoint joinPoint)&#123;</span><br><span class="line">    ex.getMessage</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="切入点表达式的写法"><a href="#切入点表达式的写法" class="headerlink" title="切入点表达式的写法"></a>切入点表达式的写法</h3><p>基于execution的函数完成的</p>
<p>语法</p>
<p>–[访问修饰符] 方法返回值 包名.类名.方法名(参数)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">*	* . * . *Dao.save(...)&#x2F;&#x2F;所有Dao的save方法	*	包名.类名+.save(...)&#x2F;&#x2F;指定类及其子类的方法	*	包名..*.*(...) &#x2F;&#x2F;指定包及其子包的	* 		*.*.aaa*(...)&#x2F;&#x2F;以aaa开头的方法</span><br></pre></td></tr></table></figure>

<h3 id="注解-1"><a href="#注解-1" class="headerlink" title="注解"></a>注解</h3><p>配置</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">aop:aspectj-autoproxy</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyAspect</span></span>&#123;</span><br><span class="line">    <span class="meta">@Before</span>(value=<span class="string">"execution()"</span>)</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> 增强()&#123;&#125;</span><br><span class="line">        </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注解的通知类型</p>
<p>@Before</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Before</span>(value=<span class="string">"execution()"</span>)</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> 增强()&#123;&#125;</span><br></pre></td></tr></table></figure>

<p>@AfterRturing</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@AfterRturing(value&#x3D;&quot;execution()&quot;,returning&#x3D;&quot;xx&quot;)</span><br><span class="line">    public void 增强(Object xx)&#123;&#125;</span><br></pre></td></tr></table></figure>

<p>@Around</p>
<p>@AfterThrowing</p>
<p>@After</p>
<p>@Pointcut</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@Pointcut(value&#x3D;&quot;execution()&quot;)</span><br><span class="line">private void fun1()&#123;&#125;</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">@Before(value&#x3D;&quot;切面类.fun1&quot;)</span><br><span class="line">    public void 增强()&#123;&#125;</span><br><span class="line"> ....</span><br></pre></td></tr></table></figure>

<h2 id="JDBC模板"><a href="#JDBC模板" class="headerlink" title="JDBC模板"></a>JDBC模板</h2><h3 id="引入jar包"><a href="#引入jar包" class="headerlink" title="引入jar包"></a>引入jar包</h3><p>六个基础Spring包</p>
<p>mysql驱动包</p>
<p>Spriong-JDBC包</p>
<p>Spring-tx(管理事务)包</p>
<p>aop包</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">demo</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">//创建连接池 ,Spring内置的默认的连接池</span></span><br><span class="line">    DriverManagerDataSource datasource = <span class="keyword">new</span> DriverManagerDataSource();</span><br><span class="line">    datasource.setDriverClassName(<span class="string">""</span>);</span><br><span class="line">    datasource.setUrl(<span class="string">""</span>);</span><br><span class="line">    datasource.setUsername(<span class="string">""</span>);</span><br><span class="line">    datasource.setpassword(<span class="string">""</span>);</span><br><span class="line">    <span class="comment">//创建JDBC模板</span></span><br><span class="line">    JdbcTemplate jdbcTemplate = <span class="keyword">new</span> JdbcTemplate(datasuorce);</span><br><span class="line">    jdbcTemplate.update(sql,args);</span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"dataSource"</span> <span class="attr">class</span>=<span class="string">"org.springframework.jdbc.datasource.DriverManagerDataSource"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClassName"</span> <span class="attr">value</span>=<span class="string">""</span>/&gt;</span></span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"jdbcTemplate"</span><span class="attr">class</span>=        <span class="string">"org.springframework.jdbc.core.JdbcTemplate"</span>&gt;</span></span><br><span class="line">  	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"datasource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>/&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="使用开源连接池"><a href="#使用开源连接池" class="headerlink" title="使用开源连接池"></a>使用开源连接池</h3><h4 id="DBCP连接池"><a href="#DBCP连接池" class="headerlink" title="DBCP连接池"></a>DBCP连接池</h4><p>导包</p>
<p>dbcp和pool</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id&#x3D;&quot;dataSource&quot; class&#x3D;&quot;org.apache.commons.dbcp.BasicDataSource&quot;&gt;</span><br><span class="line">	&lt;property name&#x3D;&quot;driverClassName&quot; value&#x3D;&quot;&quot;&#x2F;&gt;</span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">&lt;&#x2F;bean&gt;</span><br></pre></td></tr></table></figure>



<h4 id="c3p0连接池"><a href="#c3p0连接池" class="headerlink" title="c3p0连接池"></a>c3p0连接池</h4><p>导入c3p0的jar包</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id&#x3D;&quot;dataSource&quot; class&#x3D;&quot;org.apache.commons.v2.c3p0.ComboPooledDataSource&quot;&gt;</span><br><span class="line">	&lt;property name&#x3D;&quot;driverClassName&quot; value&#x3D;&quot;&quot;&#x2F;&gt;</span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">&lt;&#x2F;bean&gt;</span><br></pre></td></tr></table></figure>

<h4 id="引入连接池的外部配置文件"><a href="#引入连接池的外部配置文件" class="headerlink" title="引入连接池的外部配置文件"></a>引入连接池的外部配置文件</h4><p>新建jdbc.properties</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">jdbc.driverClass&#x3D;&quot;&quot;;</span><br><span class="line">....</span><br></pre></td></tr></table></figure>

<p>Spring配置文件中引入jdbc配置文件</p>
<p>两种方式</p>
<p>一: 通过一个bean标签引入(很少使用)</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.beans.factory.config.propertyplaceholderConfigurer"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"location"</span> <span class="attr">value</span>=<span class="string">"classpath:jdbc.properties"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>二:通过context标签引入</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;context:property-playeholder location&#x3D;&quot;classpath:jdbc.properties&quot;&#x2F;&gt;</span><br></pre></td></tr></table></figure>

<p>引入jdbc配置文件之后</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id&#x3D;&quot;dataSource&quot; class&#x3D;&quot;org.apache.commons.v2.c3p0.ComboPooledDataSource&quot;&gt;</span><br><span class="line">	&lt;property name&#x3D;&quot;driverClassName&quot; value&#x3D;&quot;$&#123;jdbc.driverClass&#125;&quot;&#x2F;&gt;</span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">&lt;&#x2F;bean&gt;</span><br></pre></td></tr></table></figure>

<h2 id="Spring的事务管理的API"><a href="#Spring的事务管理的API" class="headerlink" title="Spring的事务管理的API"></a>Spring的事务管理的API</h2><p>spring进行事务管理的时候,首先平台事务管理器根据事务定义信息进行事务管理,在事务管理过程中,产生各种状态,然后将这些状态的信息记录到事务状态的对象中</p>
<p><strong>PlatformTransactionManager</strong>:平台事务管理器</p>
<p>平台事务管理器: 接口 ,是Spring用于管理的真正的对象</p>
<p>两个实现类:</p>
<p>–DataSourceTransactionManager :底层使用jdbc管理事务</p>
<p>–HibernateTransactionManager  :底层使用Hibernate管理事务</p>
<p><strong>TransactionDefinition</strong>:事务定义信息</p>
<p>事务定义: 用于定义事务的相关信息,</p>
<p>隔离级别,超时信息,传播行为,是否只读</p>
<p><strong>TransactionStatus</strong> :事务状态</p>
<p>事务状态:用于记录事务管理过程中.事物的状态的对象</p>
<p>传播行为:</p>
<p>主要用来解决业务之间方法相互调用</p>
<p>共有七种分为三类:</p>
<p>–保证多个操作在同一个事务中</p>
<p>​    PROPAGATION_REQUIRED</p>
<p>: 默认值  如果调用的业务有事务,则使用它的事务,如果没有则创建一个事务</p>
<p>​    PROPAGATION_SUPPORTS </p>
<p>:如果调用的业务有事务,则使用它的事务,如果没有则不使用事务</p>
<p>​    PROPAGATION_MANDATORY</p>
<p>:如果调用的业务有事务,则使用它的事务,如果没有则抛出异常</p>
<p>–保证多个操作不在同一个事务中</p>
<p>​    PROPAGATION_REQUIRES_NEW</p>
<p>:如果调用的业务有事务,则将它挂起(暂停),创建新事物,只包含自己的操作,如果没有事务也是如此</p>
<p>​    PROPAGATION_NOT_SUPPORTED</p>
<p>:如果调用的业务有事务,则将它挂起(暂停),然后不使用事务,</p>
<p>​    PROPAGATION_NEVER</p>
<p>:如果调用的业务有事务,则抛出异常</p>
<p>–嵌套式事务</p>
<p>PROPAGATION_NESTED</p>
<p>:</p>
<p>用途:如果调用的业务有事务,则按照它的事务执行,执行完成后设置一个保存点,执行自己的操作,如果没有异常,执行通过,如果有异常可以选择回滚到初始位置或保存点</p>
<p>写DAO时可以继承一个类来简化代码</p>
<p>它里面有setDataSource方法</p>
<p>并且会通过DataSource创建Jdbc模板</p>
<p>在Spring配置文件里面给dao注入一个连接池即可</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"dao"</span> <span class="attr">class</span>=<span class="string">"dao实现类"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"datasource"</span> <span class="attr">ref</span>=<span class="string">"datasource"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="配置事务管理器"><a href="#配置事务管理器" class="headerlink" title="配置事务管理器"></a>配置事务管理器</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"transactionManager"</span> <span class="attr">class</span>=<span class="string">"org.springframework.jdbc.datasource.DataSourceTransactionManager"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="编程式管理事务"><a href="#编程式管理事务" class="headerlink" title="编程式管理事务"></a>编程式管理事务</h3><p>配置事务管理的模板</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"transactionTemplate"</span> <span class="attr">class</span>=<span class="string">"org.springframework.transaction.support.TransactionTemplate"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"transactionManager"</span> <span class="attr">ref</span>=<span class="string">"transactionManager"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>在业务层注入事务管理模板</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"Service"</span> <span class="attr">class</span>=<span class="string">"Service"</span>&gt;</span></span><br><span class="line">	 <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dao"</span> <span class="attr">ref</span>=<span class="string">"dao"</span>/&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"transactionTemplate"</span> <span class="attr">ref</span>=<span class="string">"transactionTemplate"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Service</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> TransactionTemplate transactionTemplate;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">service1</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        transactionTemplate.excute(</span><br><span class="line">            <span class="keyword">new</span> TransactionCallbackWithoutResult()&#123;</span><br><span class="line">                <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doIntransactionWithoutResult</span><span class="params">(TransactionStatus transactionStatus)</span></span>&#123;</span><br><span class="line">                    dao方法</span><br><span class="line">                        </span><br><span class="line">                        ...</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="声明式事务管理"><a href="#声明式事务管理" class="headerlink" title="声明式事务管理"></a>声明式事务管理</h3><p>(主要使用,通过配置实现-AOP原理)</p>
<p>引入aop的四个包</p>
<h4 id="XML方式的声明式事务管理"><a href="#XML方式的声明式事务管理" class="headerlink" title="XML方式的声明式事务管理"></a>XML方式的声明式事务管理</h4><p>配置事务管理器: 上面有</p>
<p>配置事务的增强</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">tx:advice</span> <span class="attr">id</span>=<span class="string">"vv"</span> <span class="attr">transaction-manager</span>=<span class="string">"transactionManager"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">"save*"</span> <span class="attr">...</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tx:advice</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>AOP的配置</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">expression</span>=<span class="string">"execution()"</span> <span class="attr">id</span>=<span class="string">"aa"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:adviseradvice-ref="vv"</span> <span class="attr">pointcut-ref</span>=<span class="string">"aa"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="注解方式的声明式事务管理"><a href="#注解方式的声明式事务管理" class="headerlink" title="注解方式的声明式事务管理"></a>注解方式的声明式事务管理</h4><p>配置事务管理器: 上面有</p>
<p>开启注解事务</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;tx:annotation-driven transaction-manger&#x3D;&quot;transactionManager&quot;&#x2F;&gt;</span><br></pre></td></tr></table></figure>

<p>在业务层添加注解</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Transaction</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Service</span></span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://djf-github.github.io/2018/05/30/java_web/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="djf">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="我要养只大熊猫">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/05/30/java_web/" class="post-title-link" itemprop="url">Web of Java</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-05-30 22:57:39" itemprop="dateCreated datePublished" datetime="2018-05-30T22:57:39+08:00">2018-05-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-03-09 02:23:20" itemprop="dateModified" datetime="2020-03-09T02:23:20+08:00">2020-03-09</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="javaWeb"><a href="#javaWeb" class="headerlink" title="javaWeb"></a>javaWeb</h1><h2 id="上传下载发邮件"><a href="#上传下载发邮件" class="headerlink" title="上传下载发邮件"></a>上传下载发邮件</h2><h3 id="上传"><a href="#上传" class="headerlink" title="上传"></a>上传</h3><p>1.上传对表单的限制</p>
<p>method=”post”</p>
<p>enctype=”multipaert/form-data”</p>
<p>表单中需要添加文件项</p>
<p>:<input type="file" name="xxx"/></p>
<p>2.上传对Servlet的限制</p>
<p>request.getParamater(“xxx”);这个方法在文件表单中没用了</p>
<p>ServletInputStream request = reques.getInputStream();包含整个请求体</p>
<p>1.创建工厂 DiskFileItemFactory  factory = new DiskFileItemFactory(new File(“”));</p>
<p>2.创建解析器 ServerFileUpload sfu = new ServerFileUpload(factory);</p>
<p>3.使用解析器来解析request得到FileItem集合:</p>
<p>List<FileItem>fileItemList = C.parseRequest(request);</p>
<p>FileITem</p>
<p>isFormFiled();是否 为普通表单项</p>
<p>getFiledName();得到当前表单项名称</p>
<p>getString();得到表单项的值</p>
<p>getName();返回文件名称</p>
<p>getSize();返回上传文件的字节数</p>
<p>getInputStream();返回上传文件对应的输入流</p>
<p>write(File destFile);把文件内容保存到指定文件</p>
<p>上传的细节:</p>
<p>文件必须保存在WEB-INF目录下</p>
<p>文件名是绝对路径,需要切割</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">String filename = fi2.getName();</span><br><span class="line"><span class="keyword">int</span> index = filename.lastIndexOf(<span class="string">"\\"</span>);</span><br><span class="line"><span class="keyword">if</span>(index!=-<span class="number">1</span>)&#123;</span><br><span class="line">    filename = filename.sunstring(index+<span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>文件名乱码问题:</p>
<p>servlertFileUpload.setHeaderEncoding(“utf-8”);//优选级高</p>
<p>文件名同名问题:</p>
<p>filename = CommomUtils.uuid()+”_”+filename;</p>
<p>目录打散:</p>
<p>不能在同一目录下存放太多文件</p>
<p>要分目录存放</p>
<p>上传文件大小限制:  </p>
<p>在解析之前执行</p>
<p>单个文件大小限制</p>
<p>sfu.setFileSizeMax(100*1024);</p>
<p>整个请求所有数据大小限制</p>
<p>sfu.setSizeMax(1024*1024,new file(“  “));</p>
<p>缓存大小与临时目录</p>
<p>DiskFileItemFactory  factory = new DiskFileItemFactory(20*1024);</p>
<h3 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h3><p>下载就是向客户端响应字节数据!</p>
<p>原来我们响应的都是HTML的字符数据!</p>
<p>把一个文件编程字节数组,使用response.getOutputStream()来响应给浏览器!!!</p>
<p>下载的要求</p>
<p>两个头一个流</p>
<p>Contrn-type :你传递给客户端是什么MIME类型,例如:image/pjpeg</p>
<p>Contentype-disposition: 它的默认值为inline</p>
<p>表示在浏览器窗口中打开</p>
<p>attachment;filename=”a.mp3”;</p>
<p>下载文件之文件名乱码</p>
<p>通用方法:</p>
<p>String filename  = new String(“流光飞舞.MP3”.getBytes(gbk),”iso8859-1”);</p>
<h3 id="邮件"><a href="#邮件" class="headerlink" title="邮件"></a>邮件</h3><p>邮件协议:</p>
<p>SMTP:发邮件协议</p>
<p>POP3:收邮件协议</p>
<p>IMAP:收发邮件协议</p>
<p>邮件服务器名称:</p>
<p>smtp服务器的端口号为25 ,服务器名称为smtp.xxx.xxx</p>
<p>p0p3服务器的端口号为110,服务器名称为pop3.xxx.xxx</p>
<p>例如</p>
<p>163.:smtp.163.com 和pop3.163.com</p>
<p>………</p>
<p>火狐浏览器使用的是base64编码</p>
<p>base64编码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">String s = <span class="string">"username"</span>;</span><br><span class="line">BASE64Encoder base = <span class="keyword">new</span> BASE64Encoder();</span><br><span class="line">s = base.encode(s.getBytes(<span class="string">"UTF-8"</span>));</span><br></pre></td></tr></table></figure>

<p>解码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">BASE64Decoder decoder = <span class="keyword">new</span> BASE64Decoder();</span><br><span class="line"></span><br><span class="line"><span class="keyword">byte</span>[] bytes = decoder.decodeBuffer(s);</span><br></pre></td></tr></table></figure>

<p>其他浏览器使用的是URL编码</p>
<p>发邮件:</p>
<p>1.导包</p>
<p>​    mail.jar</p>
<p>​    actvition.jar</p>
<p>核心类</p>
<p>1.Session</p>
<p>和Connection作用相似 ,表示与服务器连接</p>
<p>2.MimeMessage</p>
<p>表示一个邮件对象和,调用setForm()</p>
<p>设置发件人,设置收件人,设置主题,设置正文</p>
<p>3.TransPort</p>
<p>一个功能:发邮件</p>
<p>得到Session</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Session.getInstanse(Properties,Authenticator);</span><br><span class="line"></span><br><span class="line">Properites props = <span class="keyword">new</span> Properties();</span><br><span class="line">props.setProperty(<span class="string">"mail.host"</span>,<span class="string">"smtp.163.com"</span>);</span><br><span class="line">props.setProperty(<span class="string">"mail.smtp.auth"</span>,<span class="string">"true);</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">                  Authenticator auth = new Authenticator()&#123;</span></span><br><span class="line"><span class="string">                      protected PasswordAuthenitication getPasswordAuthentication()&#123;</span></span><br><span class="line"><span class="string">                          return new PasswordAuthentication("</span>用户名<span class="string">","</span>密码<span class="string">");</span></span><br><span class="line"><span class="string">                      &#125;</span></span><br><span class="line"><span class="string">                  &#125;;</span></span><br><span class="line"><span class="string">  Session session = Session.getInstace(props,auth);</span></span><br></pre></td></tr></table></figure>

<p>得到MimeMessage</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">MimeMessage msg = <span class="keyword">new</span> MimeMessage(session);</span><br><span class="line">msg.setFrom(<span class="keyword">new</span> InternetAddress(<span class="string">"用户名@163.com"</span>));</span><br><span class="line">msg.setRecipients(RecipienType.To,<span class="string">"用户名@126.com"</span>);</span><br><span class="line">msg.setRecipients(RecipienType.CC,<span class="string">"用户名@126.com"</span>);<span class="comment">//设置抄送</span></span><br><span class="line">msg.setRecipients(RecipienType.BCC,<span class="string">"用户名@126.com"</span>);<span class="comment">//设置暗送</span></span><br><span class="line">msg.setSubject(<span class="string">"标题"</span>);</span><br><span class="line">msg.setContent(<span class="string">"主题"</span>);</span><br></pre></td></tr></table></figure>

<p>发送</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Transport.send(msg);</span><br></pre></td></tr></table></figure>

<p>发带有附件的邮件</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">.....</span><br><span class="line">MimeMultipart list =<span class="keyword">new</span> MimeMultipart();<span class="comment">//一个集合</span></span><br><span class="line">MimeBodypart part1 = <span class="keyword">new</span> MimeBodyPart();</span><br><span class="line"><span class="comment">//设置邮件主题内容</span></span><br><span class="line">part1.setContent(<span class="string">"邮件主题1"</span>,<span class="string">"text/html"</span>);</span><br><span class="line">list.add(part1);</span><br><span class="line">MimeBodypart part2= <span class="keyword">new</span> MimeBodyPart();</span><br><span class="line"><span class="comment">//设置邮件主题内容</span></span><br><span class="line">part2.attachFile(<span class="keyword">new</span> File(<span class="string">""</span>);<span class="comment">//设置附件内容</span></span><br><span class="line"> part2.setFilename(MimeUtility.encodingText(<span class="string">"文件名"</span>);</span><br><span class="line">   list.add(part2;              </span><br><span class="line">msg.setContent(list);</span><br><span class="line"></span><br><span class="line">.....</span><br></pre></td></tr></table></figure>



<h3 id="mailUtils工具使用发邮件"><a href="#mailUtils工具使用发邮件" class="headerlink" title="mailUtils工具使用发邮件"></a>mailUtils工具使用发邮件</h3><p>依赖包还是上面那两个</p>
<p>Session session</p>
<p>Session</p>
<h2 id="http协议"><a href="#http协议" class="headerlink" title="http协议"></a><u>http</u>协议</h2><p>​    httpwatch: 抓包工具  抓取协议头</p>
<p>​    相应协议:</p>
<p>html操作思想:</p>
<p>通过标签把数据包装起来;然后改变标签的属性让数据呈现各种不同的效果</p>
<h2 id="Listener-监听器"><a href="#Listener-监听器" class="headerlink" title="Listener(监听器)"></a>Listener(监听器)</h2><p>它是一个接口,内容由我们实现</p>
<p>它需要注册,例如注册在按钮上.</p>
<p>监听器中的方法,会在特殊事件发生时被调用</p>
<p>事件源:三大域(Servler httpSession Servlet)</p>
<p>每个与有生死监听和属性监听</p>
<p>域()Listener,</p>
<p>两个方法一个在出生时调用,一个在死亡时调用</p>
<p>域AttributeLister</p>
<p>三个方法</p>
<p>添加属性时调用</p>
<p>修改属性时调用</p>
<p>删除属性时调用</p>
<p>创建一个类实现上面的监听器接口</p>
<p>web.xml配置</p>
<listener>

<p>​    <listener-class> 包名+类名&lt;\listener&gt;</p>
<p>&lt;\listenter&gt;</p>
<p>感知监听:HttpSessionBindingListener</p>
<p>不需要注册xml配置文件</p>
<p>绑定在javaBean中,由javaBean实现接口</p>
<p>session自动重生(序列化)</p>
<p>关闭服务器把Session保存在文件中</p>
<p>取消自动重生需要在 Context.xml文件下</p>
<p>Context元素下</p>
<p>配置</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;Manager pathname&#x3D;&quot;&quot;&#x2F;&gt;</span><br></pre></td></tr></table></figure>

<p>session钝化和活化</p>
<p>钝化:指定时间不是使用后保存在文件</p>
<p>活化:从文件读取到内存,活化后文件不会消失</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Context</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">Manager</span> <span class="attr">classname</span>=</span></span><br><span class="line"><span class="tag">	"<span class="attr">org.apache.catalina.session.PersistentManager</span>" </span></span><br><span class="line"><span class="tag">	<span class="attr">naxIdleSwap</span>=<span class="string">"1"</span>&gt;</span>//1分钟</span><br><span class="line">	<span class="tag">&lt;<span class="name">Store</span> <span class="attr">classname</span>=<span class="string">"org.apache.catalina.session.FileStore"</span>	<span class="attr">directory</span>=<span class="string">"mysession"</span>/&gt;</span>//路径相对项目路径下</span><br><span class="line">	<span class="tag">&lt;/<span class="name">Manager</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Context</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>javaBean需要实现序列化接(java.io.Serializable)才能和Session一起钝化和序列化</p>
<p>国际化</p>
<h2 id="Filter-过滤器"><a href="#Filter-过滤器" class="headerlink" title="Filter(过滤器)"></a>Filter(过滤器)</h2><p>它会在一组资源的前面执行</p>
<p>它可以让请求得到目标资源,也可以不让请求到达!</p>
<p>–过滤器有拦截请求的能力!</p>
<p>Filter接口</p>
<p>void init(FilterConfig)</p>
<p>创建之后,马上执行:Filter会在服务器启动时就会创建!</p>
<p>void destory()</p>
<p>销毁之前执行,在服务器关闭时销毁</p>
<p>void doFilter()</p>
<p>每次过滤时都会执行</p>
<p>Filter是单例的</p>
<p>web.xml中配置</p>
<p>跟servlet一样的配置</p>
<p>url-pattern通常设置为/*</p>
<p>表示为拦截所有路径的</p>
<p>四种拦截方式</p>
<p>​    <dispatcher>REQUEST</dispatcher>默认的</p>
<p>​    <dispatcher>FORWARD</dispatcher></p>
<p>​    <dispatcher>INCLUDE</dispatcher></p>
<p>​    <dispatcher>ERROR</dispatcher></p>
<p>执行顺序取决于mapping的配置顺序</p>
<h3 id="页面静态化"><a href="#页面静态化" class="headerlink" title="页面静态化"></a>页面静态化</h3><p>目标:</p>
<p>给出一个过滤器,把servlet请求的资源所做输出保存到html中,重定向到html页面.二次访问时,这个html已经存在,那么直接重定向,不在去访问Servlet</p>
<h2 id="servlet"><a href="#servlet" class="headerlink" title="servlet"></a>servlet</h2><h3 id="浏览器访问Servlet"><a href="#浏览器访问Servlet" class="headerlink" title="浏览器访问Servlet"></a>浏览器访问Servlet</h3><p>​    给Servlet指定一个路径(让Servlet与一个路径绑定在一起) 然后浏览器访问Servlet路径</p>
<p>&lt;servlet&gt;</p>
<p>​    &lt;servlet-name&gt;名称(与路径绑定的名称,自己随意定义)&lt;/servlet-name&gt;</p>
<p>​    &lt;servlet-class&gt;Servlet类名(带包名)&lt;/servlet-class&gt;</p>
<p>&lt;/servlet&gt;</p>
<p>&lt;servlet-mapping&gt;</p>
<p>​    &lt;servlet-name&gt;名称(与上面相同即可)&lt;/servlet-name&gt;</p>
<p>​    &lt;url-pattern&gt;路径(浏览器访问的路径 自己随意定义)&lt;/url-pattern&gt;</p>
<p>&lt;/servlet-mapping&gt;</p>
<p>浏览器访问:<a href="http://localhost:8080/项目名(或者说工程名)/路径(上面自己定义的不是类的路径)" target="_blank" rel="noopener">http://localhost:8080/项目名(或者说工程名)/路径(上面自己定义的不是类的路径)</a></p>
<p>​    &lt;url-pattern&gt;可以有多个路径: 即浏览器可以有多个访问路径</p>
<p>​    路径可以使用通配符(*)</p>
<p>​    /servlet/*</p>
<p>​    *.do  :后缀名匹配  符合这个后缀名的都匹配</p>
<p>​        浏览器访问示例:</p>
<p>​    <a href="http://localhost:8080/类所在包名/*.do" target="_blank" rel="noopener">http://localhost:8080/类所在包名/*.do</a></p>
<p>​    <a href="http://localhost:8080/类所在包名" target="_blank" rel="noopener">http://localhost:8080/类所在包名</a></p>
<p>​    /*</p>
<p>​    生命周期方法</p>
<p>​    void init(servletConfig) 创建之后(出生之后)执行一次</p>
<p>​    void service(ServletRequest request ,ServletResponse response):每次请求都会执行</p>
<p>​    void destroy() ; 销毁之前(临死之前)执行一次</p>
<p>servlet类由我们来写,但对象由服务器来创建,并且由服务器来调用相应的方法</p>
<p>ServletConfig : </p>
<p>​    一个ServletConfig对象,对象一段web.xml中Servlet的配置信息</p>
<p>​    功能:</p>
<p>​    String getServletname() :</p>
<p>​         获取&lt;servlet-name&gt;&lt;/servlet-name&gt;的内容</p>
<p>​    servletContext getServletContext():</p>
<p>​        获取Servlet上下文对象</p>
<h3 id="servlet与线程安全"><a href="#servlet与线程安全" class="headerlink" title="servlet与线程安全"></a>servlet与线程安全</h3><p>servlet是单例对象 可以有多个Servlet类</p>
<p>​    <strong>注意:</strong>  线程不安全,效率高</p>
<p>不要在Servley中创建成员,创建局部变量即可</p>
<p>可以创建无状态成员</p>
<p>可以创建有状态成员,但状态必须为只读的</p>
<h3 id="Servlet对象创建"><a href="#Servlet对象创建" class="headerlink" title="Servlet对象创建"></a>Servlet对象创建</h3><p>默认情况下,服务器会在某个Servlet第一次收到请求时创建,也可以在web.xml中进行配置,使服务器启动时就创建Servlet</p>
<p>在&lt;servlet&gt;标签中添加</p>
<p>&lt;load-on-startup&gt;数值(非负整数)&lt;/load-on-startup&gt;</p>
<p>服务器对标签里面的数值进行排序,数值小的先被创建</p>
<h3 id="web-xml"><a href="#web-xml" class="headerlink" title="web.xml"></a>web.xml</h3><p>​    每个完整的web应用中都需要有web.xml,但我们不知道所有的web.xml文件都有一个共同的父文件,它在Tomcat的conf/web.xnl路径</p>
<p>​    具体分析写在那个web.xml文件中</p>
<h3 id="servlet与反射"><a href="#servlet与反射" class="headerlink" title="servlet与反射"></a>servlet与反射</h3><p>浏览器输入路径与 &lt;url-pattern&gt;中的值进行匹配</p>
<p>匹配之后得到&lt;servlet-name&gt;  然后得到&lt;servlet-class&gt;</p>
<p>即得到了一个字符串</p>
<p>然后使用Class类中的forName(String classname)</p>
<p>得到相应的Servlet类对象</p>
<p>得到对象之后相应的操作可以去java基础查看反射的基本使用</p>
<h3 id="ServletContext对象"><a href="#ServletContext对象" class="headerlink" title="ServletContext对象"></a>ServletContext对象</h3><p>​    –javaweb四大域对象之一</p>
<p>​    –pageContext</p>
<p>​    –ServletRequest</p>
<p>​    –HttpSession</p>
<p>​    –ServletContext</p>
<p>所有域对象都有存储数据的功能,因为域对象内部一个Map用来存储数据,</p>
<p>一个Servlet对象存,另一个对象取</p>
<h3 id="获取类路径资源"><a href="#获取类路径资源" class="headerlink" title="获取类路径资源"></a>获取类路径资源</h3><p>Class的路径(/a.txt)</p>
<p>表示相对classes目录下的a.txt </p>
<p>​    一个项目只有一个ServletContext对象 可以有N个Servlet对象</p>
<h3 id="状态码"><a href="#状态码" class="headerlink" title="状态码"></a>状态码</h3><p>response.setStatus(状态码,信息);</p>
<h3 id="Response"><a href="#Response" class="headerlink" title="Response"></a>Response</h3><p>发送响应头 响应头是一个键值对(存在一个键对应多个值)</p>
<h4 id="常用响应头"><a href="#常用响应头" class="headerlink" title="常用响应头:"></a>常用响应头:</h4><p>​    <meta>可以也可以设置响应头</p>
<p>​    setHeader(String name,String value)</p>
<p>Content-Type</p>
<p>Refresh:</p>
<p>​    定时重定向</p>
<p>​    setHeader(“Refresh”,”5:URL=/myjavaweb/Servlet”)</p>
<p>Location:</p>
<p>​    重定向的地址</p>
<p>​    快捷重定向方法</p>
<p>​    response.setRedirect(“url”)</p>
<h4 id="response设置响应头"><a href="#response设置响应头" class="headerlink" title="response设置响应头"></a>response设置响应头</h4><p>​    –setHeader(String name,String value)</p>
<p>​    给定名字的响应头设置值</p>
<p>​    –addHeader(String name,String value)</p>
<p>​    给一个键多个值得响应头增加值</p>
<p>​    –setIntHeader(String name,int value)</p>
<p>​    专门给值为int类型的响应头设置值</p>
<h4 id="禁用浏览器缓存"><a href="#禁用浏览器缓存" class="headerlink" title="禁用浏览器缓存"></a>禁用浏览器缓存</h4><p>设置下面三个响应头</p>
<p>Cache-Control : no-cache    </p>
<p>pragma :no-cache</p>
<p>expires:-1</p>
<h4 id="response两个输出流"><a href="#response两个输出流" class="headerlink" title="response两个输出流"></a>response两个输出流</h4><p> ServletOutputStream :用来向客户端发送字节数据(图片)</p>
<p>response.getOutputStream()</p>
<p>PrintWriter : 用来向客户端发送字符数据!需要设置编码</p>
<p>response.getWriter()</p>
<p>!!!两个不能同时使用</p>
<h3 id="Request"><a href="#Request" class="headerlink" title="Request"></a>Request</h3><p>封装了客户端所有的请求数据</p>
<p>请求行</p>
<p>请求头</p>
<p>空行</p>
<p>请求体(空)</p>
<h4 id="常用方法"><a href="#常用方法" class="headerlink" title="常用方法"></a>常用方法</h4><p>String  getRemoteAddr()  获取客户端ip地址</p>
<p>String getMothed()  获取请求方式  get  post</p>
<p> String getHeader(String name)  获取请求指定请求头的值</p>
<p>String getScheme()  获取协议</p>
<p>String getServletName() 获取服务器名</p>
<p>String getServletPort() 获取服务器端口</p>
<p>String getContextPath()  获取项目名  /myjavaweb</p>
<p>String getServletpath() 获取Servlet路径 /Servlet</p>
<p>String getQueryString()  获取参数部分,即url问号后面带的参数和值</p>
<p>String getRequestURI()获取请求URi ,等于项目名+Servlet路径</p>
<p>String getRequestURL()   获取请求URL,等于不包含参数的整个请求路径</p>
<h4 id="请求头"><a href="#请求头" class="headerlink" title="请求头"></a>请求头</h4><p>referer</p>
<p>表示请求的来源</p>
<p>User-Agent</p>
<p>识别用户浏览器类型</p>
<h4 id="获取请求参数"><a href="#获取请求参数" class="headerlink" title="获取请求参数"></a>获取请求参数</h4><p>请求参数存在一个参数多个值</p>
<p>String getParameter(String name):  获取指定名称的请求参数</p>
<h4 id="请求转发和请求包含"><a href="#请求转发和请求包含" class="headerlink" title="请求转发和请求包含"></a>请求转发和请求包含</h4><p>请求转发</p>
<p>转发的最后一个Servlet才设置响应体</p>
<p>其他Servlet只设置响应头包括浏览器直接请求的Servlet</p>
<p>公用一个Resquest</p>
<p>request.getResquestDispatcher(url).forward(request,response)</p>
<p>请求包含</p>
<p>request.getResquestDispatcher(url).include(request,response)</p>
<p>每个Servlet都可以设置响应体</p>
<h4 id="编码"><a href="#编码" class="headerlink" title="编码"></a>编码</h4><p>iso-8859-1(不支持中文)</p>
<p>gbk(系统默认编码,中国的国标码)</p>
<p>utf-8(万国码,支持全世界的编码,大多数人使用这个)</p>
<p>请求编码</p>
<p>响应编码</p>
<p>post请求的响应编码可以自己设置</p>
<p>get请求不可以设置需要到Servlet.xml文件中进行配置</p>
<p>到&lt;Connentor&gt;标签内增加一个属性</p>
<p>URLEncoding=”UTF-8”</p>
<p>不设置默认为iso-8859-1</p>
<p>URL编码</p>
<p>get请求中没有URL编码 容易丢失数据</p>
<p>表单提交默认使用了URL编码</p>
<p>先得到字节数组 在把字节数组中的每一个int加上256</p>
<p>在转换成16进制然后再加上前面%</p>
<h4 id="路径"><a href="#路径" class="headerlink" title="路径"></a>路径</h4><p>转发和包含中写的路径</p>
<p>如果以”/“开头相对当前项目路径</p>
<p><a href="http://localhost:8080/myjavaweb" target="_blank" rel="noopener">http://localhost:8080/myjavaweb</a></p>
<p>不以”/“开头则相对Servlet路径</p>
<p>重定向路径</p>
<p>以”/“开头相对当前主机</p>
<p><a href="http://localhost:8080/" target="_blank" rel="noopener">http://localhost:8080/</a></p>
<p>页面中超链接和表单路径</p>
<p>以”/“开头则与重定向一样是相对主机路径</p>
<p>如果不以”/“开头那么相对当前html的路径</p>
<p>ServletContext获取资源路径</p>
<p>相对项目路径</p>
<p>ClassLoader获取资源路径</p>
<p>不能以”/“开头</p>
<p>相对classes路径</p>
<p>即<a href="http://localhost:8080/项目名/WEB-INF/classes" target="_blank" rel="noopener">http://localhost:8080/项目名/WEB-INF/classes</a></p>
<p>Class获取资源路径</p>
<p>以”/“开头相对classes目录</p>
<p>不以”/“开头相对当前.class文件所在目录</p>
<h2 id="Listener"><a href="#Listener" class="headerlink" title="Listener"></a>Listener</h2><p>javaWeb中的监听器</p>
<p>—事件源 : 三大域</p>
<p>ServletContext</p>
<p>服务器开在创建对象  只有一个  ,服务器关 对象销毁</p>
<p>HttpSession</p>
<p>访问servlet调用getSession则创建sessio对象</p>
<p>访问jsp页面自动创建</p>
<p>servletRequest</p>
<p>两个监听器</p>
<p>生死监听</p>
<p>属性监听</p>
<h2 id="JSP"><a href="#JSP" class="headerlink" title="JSP"></a>JSP</h2><h3 id="jsp三大指令"><a href="#jsp三大指令" class="headerlink" title="jsp三大指令"></a>jsp三大指令</h3><p>指令不是必须放在第一行</p>
<p>1.page</p>
<p>pageEncoding:</p>
<p>指定当前页面编码</p>
<p>contentType  :</p>
<p>第一个值指定MIME类型</p>
<p>​    charset=ISO-8859-1这个指定响应编码</p>
<p>两个属性有依赖关系  设置期中一个值,另一个默认跟随</p>
<p>errorPage:  </p>
<p>当前页面如果抛出异常,指定转发到哪个页面</p>
<p>isErrorPage:  </p>
<p>指定当前页面是否为处理错误页面</p>
<p>该属性为true时   发送状态码500  可以使用Exception对象</p>
<p>autoFlush :</p>
<p> 指定jsp输出流缓冲区满时  是否自动刷新</p>
<p>buffer  :</p>
<p> 指定缓冲区大小 默认8kb</p>
<p>language  : </p>
<p> 指定jsp编译后的语言类型,默认为java</p>
<p>info : 信息</p>
<p>&lt;%@page   %&gt;</p>
<p>2.include  静态包含</p>
<p>&lt;%@include file=”url”%&gt;</p>
<p>​    多个jsp在编译时合并成一个.class文件</p>
<p>3.taglib    </p>
<p>导入标签库</p>
<p>​    两个属性</p>
<p>​    prefix: 指定标签库在本页中的前缀,由我们自己定义</p>
<p>​    url:  指定标签库的位置</p>
<h3 id="jsp作用"><a href="#jsp作用" class="headerlink" title="jsp作用"></a>jsp作用</h3><h3 id="九大内置对象"><a href="#九大内置对象" class="headerlink" title="九大内置对象"></a>九大内置对象</h3><h4 id="pageContext"><a href="#pageContext" class="headerlink" title="pageContext :"></a>pageContext :</h4><p><strong>!!!一个顶九个</strong></p>
<p>作用:</p>
<p>1.当前jsp页面使用的标签之间共享数据</p>
<p>2.可以代理其他三个域</p>
<p>setAttribute(“属性名”,”属性值”,指定域)</p>
<p>3.可以获取其他其他八个内置对象</p>
<p>get对象名</p>
<p>例如getSession()</p>
<p>4.全域查找</p>
<p>findAttribute(“属性名”) ;从小到大 一次查找</p>
<h4 id="out"><a href="#out" class="headerlink" title="out :"></a>out :</h4><p>jsp输出 ,向客户端响应</p>
<h4 id="page"><a href="#page" class="headerlink" title="page :"></a>page :</h4><p>Object  page = this</p>
<h4 id="session"><a href="#session" class="headerlink" title="session :"></a>session :</h4><p>作用范围整个会话</p>
<p>HttpSession是由javaWeb提供的,用来会话跟踪的类</p>
<p>session是服务器端对象,保存在服务器端</p>
<p>会话不结束则对象一直存在</p>
<p>Servlet中得到Session对象</p>
<p>request.getSession()</p>
<p>如果不存在会创建</p>
<p>request.getSession(true)和上面效果一样</p>
<p>request.getSession()如果不存在session返回null不会创建</p>
<p>jsp中可以直接使用  (九个内置对象之一)</p>
<p>底层依赖Cookie和URL重写实现</p>
<p>session最大不活动时间</p>
<p>默认30分钟  30分钟不访问  服务器自动删了</p>
<p>服务器端可以自主设置</p>
<p>web.xml中配置session的最大不活动时间</p>
<p>&lt;session-config&gt;</p>
<p>​    &lt;session-timeout&gt;int&lt;session-timeout&gt;</p>
<p>​    单位是分钟</p>
<p>&lt;/session-config&gt;</p>
<p>常用方法</p>
<p>String        getId() 获取sessionId</p>
<p>void invalidate()  让session失效</p>
<p>boolean isNew()  查看session是为新</p>
<h4 id="request"><a href="#request" class="headerlink" title="request :"></a>request :</h4><h4 id="response"><a href="#response" class="headerlink" title="response :"></a>response :</h4><h4 id="exception"><a href="#exception" class="headerlink" title="exception :"></a>exception :</h4><p>Throwable</p>
<h4 id="config"><a href="#config" class="headerlink" title="config :"></a>config :</h4><p>ServletConfig</p>
<h4 id="application"><a href="#application" class="headerlink" title="application  :"></a>application  :</h4><p>ServletContext</p>
<h3 id="三种jsp脚本"><a href="#三种jsp脚本" class="headerlink" title="三种jsp脚本"></a>三种jsp脚本</h3><p>&lt;%   …….  %&gt;</p>
<p>java片段(常用) 用于定义0-N条Java语句,方法能写什么,它就能写什么</p>
<p>&lt;%=…..%&gt;</p>
<p>java表达式,用于输出(常用), 用于输出一条表达式(或变量的结果)</p>
<p>&lt;%! …..%&gt;</p>
<p>声明,用来创建类的成员变量和 成员方法(基本不用,但容易被可考到)</p>
<h3 id="jsp动作标签"><a href="#jsp动作标签" class="headerlink" title="jsp动作标签"></a>jsp动作标签</h3><p>&lt;jsp:forward&gt;:转发</p>
<p>&lt;jsp:include&gt;:包含</p>
<p>&lt;jsp:param&gt; :用来给转发或包含的页面参数</p>
<p>&lt;jsp:useBean&gt;:创建或查询Bean</p>
<p>&lt;jsp:setProperty&gt;</p>
<p>&lt;jsp:getProperty&gt;</p>
<h3 id="EL表达式"><a href="#EL表达式" class="headerlink" title="EL表达式"></a>EL表达式</h3><p>1.EL是JSP内置的表达式语言!</p>
<p>​    –jsp2.0开始,不然再使用java脚本,而是使用EL表达式和动态标签来替代java脚本!</p>
<p>​    EL替代的是&lt;%=  …  %&gt;  也就是说EL只能做输出</p>
<p>2.EL表达式来读取四大域</p>
<p>全域查找</p>
<p>${属性名}</p>
<p>指定域查找</p>
<p>${域Scope.属性名}</p>
<h4 id="EL十一个内置对象"><a href="#EL十一个内置对象" class="headerlink" title="EL十一个内置对象"></a>EL十一个内置对象</h4><p>除了pageContext其他十个都是Map类型</p>
<p>pageScope:</p>
<p>requestScope:</p>
<p>sessionScope:</p>
<p>applicationScope:</p>
<p>param:对应参数</p>
<p>${param.username}</p>
<p>paramvaleu:值为一个数组  适用于参数多值</p>
<p>${paramvalue.hobby[0]}</p>
<p>header:对应请求头</p>
<p>headerValue:多值请求头</p>
<p>initparam: 初始化参数</p>
<p>cookie:</p>
<p>Map&lt;String,Cookie&gt;  </p>
<p>${cookie.cookiename.value}</p>
<p>pageContext:</p>
<p>用来获取JSP其他八个对象</p>
<p>以便在EL表达式内使用JSP其他八个对象的方法</p>
<h4 id="EL函数库"><a href="#EL函数库" class="headerlink" title="EL函数库"></a>EL函数库</h4><p>(由jstl提供)</p>
<p>​    导入标签库</p>
<p>​    &lt;%@t aglib    prefix:  “  “uri:” “   %&gt;</p>
<p>自定义函数库</p>
<p>​    写一个java类  里面写方法  方法为静态  必须有返回值</p>
<p>​    在WEB-INF下创建一个配置文件后缀名为tld</p>
<h4 id="JSTL"><a href="#JSTL" class="headerlink" title="JSTL"></a>JSTL</h4><p>apache提供的依赖 EL</p>
<p>使用jstl需要导入jstl1.2.jar</p>
<p>四大库</p>
<p>&lt;@taglib prefix=”前缀”  uri=”路径”&gt;</p>
<p>核心标签—&gt;也叫C标签(一般使用c作为前缀)</p>
<h5 id="core"><a href="#core" class="headerlink" title="core"></a>core</h5><p>out</p>
<pre><code>value:可以使EL表达式 也可以是字符串常量</code></pre><p>​    default : 输出内容为空时,输出default的内容</p>
<p>​    escapeXml: 默认值为true ,表示转义</p>
<p>set</p>
<p>​    var :变量名</p>
<p>​    value: 变量值</p>
<p>​    scope: 域</p>
<p>remove</p>
<p>​    var :变量名</p>
<p>​    scope: 不指定域  删除所有域的同名变量</p>
<p>url</p>
<p>value :指定路径,,会在路径前面自动添加项目名</p>
<p>子标签&lt;c:param&gt;  用来给url后面添加参数</p>
<p>var: 指定变量名 ,保存url</p>
<p>scope: 指定域 保存url</p>
<p>  if</p>
<p>&lt;c:if test=”boolean”&gt;</p>
<p>&lt;/c:if&gt;</p>
<p>choose</p>
<p>forEach</p>
<p>&lt;c:foreach items=”${}” var=”str”&gt;</p>
<p>​    ${}&lt;br/&gt;</p>
<p>&lt;/c:foreach&gt;</p>
<p>循环状态变量varStatus</p>
<p>注意 items引号不能有空格</p>
<h5 id="fmt"><a href="#fmt" class="headerlink" title="fmt"></a>fmt</h5><p>格式化库</p>
<p>例如 格式化日期</p>
<p>&lt;fmt:formatData value=”” pattern=”yyyy-mm-dd HH:MM:SS”</p>
<h5 id="自定义标签"><a href="#自定义标签" class="headerlink" title="自定义标签"></a>自定义标签</h5><p>1.步骤</p>
<p>​    –标签处理类</p>
<p>​    –tld文件,一个XML</p>
<p>​    –页面中使用&lt;%@taglib%&gt;来指定tld文件的位置</p>
<p>2.标签处理类</p>
<p>Simpletag接口</p>
<p>​    void doTag()  每次执行标签时都会调用这个方法</p>
<p>3.tld文件配置</p>
<p>&lt;tag&gt;</p>
<p>​    &lt;name&gt;&lt;/name&gt;指定当前标签的名称</p>
<p>​    &lt;tag-class&gt;&lt;/tag-class&gt;指定当前标签的处理类</p>
<p>​    &lt;body-content&gt;&lt;/body-content&gt;指定标签体的类型</p>
<p>这三个必须有</p>
<p>&lt;tag&gt;</p>
<p>标签体内容</p>
<p>empty:无标签体</p>
<p>JSP:  不再支持</p>
<p>scriptless:只能是EL表达式 ,也可以是其他的标签</p>
<h3 id="Cookie"><a href="#Cookie" class="headerlink" title="Cookie"></a>Cookie</h3><p>Set-Cookie</p>
<p>cookie的生命</p>
<h3 id="cookie路径"><a href="#cookie路径" class="headerlink" title="cookie路径"></a>cookie路径</h3><h4 id="URL重写"><a href="#URL重写" class="headerlink" title="URL重写"></a>URL重写</h4><p>response.encodeURL(String url)</p>
<p>该方法会对url进行智能的重写,当请求中没有sessionid时那么该方法会重写url否则不重写</p>
<p>重写是指给url带上一个sessionid的参数和值</p>
<p>例如:</p>
<p>&lt;a href=”/javaweb/Servlet;JSESSIONID=&lt;%=session.getId()%&gt;”&gt; &lt;/a&gt;</p>
<h2 id="javaBean"><a href="#javaBean" class="headerlink" title="javaBean"></a>javaBean</h2><p>规范</p>
<p>1.必须要有一个默认构造器(无参数)</p>
<p>2.提供 get/set 方法,如果只有get方法,那么这个属性为只读属性</p>
<p> 使用</p>
<p>BeanInfo beanInfo = </p>
<h2 id="java绘图"><a href="#java绘图" class="headerlink" title="java绘图"></a>java绘图</h2><p>1.创建图片缓冲区</p>
<p>2.设置其宽高</p>
<p>3.得到绘画环境</p>
<p>4.保存</p>
<p>BufferedImage bi = new BufferedImage();</p>
<p>g.setColor(Color.WHITE);</p>
<p>g.fillRect(0, 0, 70, 35);</p>
<p>g.setColor(Color.RED);</p>
<p>g.drawString(“hellow”, 5, 15);</p>
<p>ImageIO.write(bi, “JPEG”, new FileOutputStream(“D:/my.jpg”));</p>
<h4 id="验证码"><a href="#验证码" class="headerlink" title="验证码"></a>验证码</h4><h2 id="MVC设计模式"><a href="#MVC设计模式" class="headerlink" title="MVC设计模式"></a>MVC设计模式</h2><p>不是java独有 所有的B/S结构的项目都用它</p>
<p>M—-model  模型(自己写代码)</p>
<p>V—-view  视图(jsp)</p>
<p>C—-Cotroller  控制器 (Servlet)</p>
<p>javaWeb三层框架</p>
<p>Web层—-与Web层相关的内容(Servlet)</p>
<p>业务层—-业务对象(service)</p>
<p>数据层—-操作数据库</p>
<h2 id="html"><a href="#html" class="headerlink" title="html"></a>html</h2><h3 id="标签"><a href="#标签" class="headerlink" title="标签"></a>标签</h3><h4 id="列表标签"><a href="#列表标签" class="headerlink" title="列表标签"></a>列表标签</h4><p>&lt;dl&gt;</p>
<p>​    &lt;dt&gt;&lt;/dt&gt;</p>
<p>​    &lt;dt&gt;&lt;/dt&gt;</p>
<p>​    &lt;dt&gt;&lt;/dt&gt;</p>
<p>&lt;/dl&gt;</p>
<p>&lt;ol&gt;&lt;/ol&gt;:有序标签  默认排序方式 1 (默认)    a   i</p>
<p>type属性设置排序方式</p>
<p>&lt;ol type=”a”&gt;</p>
<p>​    &lt;li&gt;&lt;/li&gt;</p>
<p>​    &lt;li&gt;\</p>
<p>​    &lt;li&gt;&lt;/li&gt;</p>
<p>&lt;/ol&gt;</p>
<p>&lt;ul&gt;&lt;/ul&gt;</p>
<p>属性:type:circle(空心圆)  sidc(实心圆)  square实心方块 默认dis</p>
<h4 id="图像标签"><a href="#图像标签" class="headerlink" title="图像标签"></a>图像标签</h4><p>&lt;img src=”图片路径”/&gt;</p>
<p>-alt :图片上显示的文字(把鼠标停留在图片上会显示的信息)</p>
<h4 id="超链接标签"><a href="#超链接标签" class="headerlink" title="超链接标签"></a>超链接标签</h4><h5 id="1-链接资源"><a href="#1-链接资源" class="headerlink" title="1.链接资源"></a>1.链接资源</h5><p> &lt;a href = “链接到的资源路径”&gt;页面显示的文字&lt;/a&gt;</p>
<p>-target:设置打开方式,默认当前页打开   </p>
<p>当超链接不需要到任何的地址,在href里面加#</p>
<h5 id="2-定位资源"><a href="#2-定位资源" class="headerlink" title="2.定位资源"></a>2.定位资源</h5><pre><code>如果想要定位资源:定义一个位置</code></pre><p>   &lt;a name=”top”&gt;顶部&lt;/a&gt;</p>
<p>​    回到这个位置</p>
<p>&lt;a href=”#top”&gt;回到顶部&lt;/a&gt;  </p>
<p>​    y引入一个标签 pre :原样输出</p>
<h4 id="表格标签"><a href="#表格标签" class="headerlink" title="表格标签"></a>表格标签</h4><p>&lt;table&gt;(表格)</p>
<p>​    &lt;tr&gt;(行)</p>
<p>​    &lt;td&gt;&lt;/td&gt;(列)</p>
<p>​    &lt;/tr&gt;</p>
<p>&lt;/table&gt;</p>
<p><strong>属性</strong></p>
<p>cellspacing : </p>
<p>设置表格单元格之间的距离</p>
<p> aling:</p>
<p>设置表格内容  显示方式  left  center  right</p>
<p><strong>使用技巧</strong></p>
<p>th(标签:加粗居中):</p>
<p>caption(标签:表格标题)</p>
<p>合并单元格</p>
<p>-rowspan :跨行</p>
<p>-colspan :跨列</p>
<h4 id="表单标签"><a href="#表单标签" class="headerlink" title="表单标签"></a>表单标签</h4><p><strong>属性</strong></p>
<p>&lt;form&gt;</p>
<p>​    –action :        </p>
<p>​    提交到地址,默认提交到当前页面</p>
<p>​    –method:    </p>
<p>​    表单提交方式</p>
<p>​    get</p>
<p>方式在地址栏显示提交的信息</p>
<p>get请求安全级别较低</p>
<p>get请求有数据大小的限制</p>
<p>​    post</p>
<p>方式不显示提交的信息</p>
<p>post请求安全级别较高</p>
<p>post请求没有数据大小的限制</p>
<p>​    &lt;input   type=”” name =””/&gt;</p>
<p>input type:</p>
<p>​    reset(重置)</p>
<p>​     radio(单选)   </p>
<p>​    checkbox(复选) </p>
<p>​    单选和复选要加入这个属性指定默认值checked=”checked”</p>
<p>​    file(文件输入项) </p>
<p>​    hiden(隐藏项)  </p>
<p>​    submit(提交项)</p>
<p>​    image(图片提交)</p>
<p>​    必须要有name属性</p>
<p>​    属性值必须要一样</p>
<p>​    &lt;select&gt;(下拉输入项)</p>
<p>​        selected=”selected”(下拉项的默认设置 )</p>
<p>​        &lt;option value=””&gt;&lt;/option&gt;</p>
<p>​    &lt;/select&gt;</p>
<p>​    &lt;textarea&gt;(文本域)</p>
<p>​    –cols:列</p>
<p>​    –rows: 行</p>
<p>​    &lt;textarea&gt;</p>
<p>​    &lt;</p>
<p>&lt;/form&gt;</p>
<h4 id="其他常用标签"><a href="#其他常用标签" class="headerlink" title="其他常用标签"></a>其他常用标签</h4><p>b:加粗</p>
<p>s:删除线</p>
<p>u:下划线</p>
<p>i:斜体</p>
<p>pre:原样输出</p>
<p>hr:水平线</p>
<p>br:换行</p>
<p>sub:下标</p>
<p>sup:上标</p>
<p>div:自动换行</p>
<p>span:一行显示</p>
<p>p:段落</p>
<h4 id="头标签"><a href="#头标签" class="headerlink" title="头标签"></a>头标签</h4><p>&lt;head&gt;&lt;/head&gt;</p>
<p>title</p>
<p>标题</p>
<p>meta</p>
<p>页面的基本设置</p>
<p>base</p>
<p>设置超链接的基本设置</p>
<p>link</p>
<p>引入外部文件</p>
<h4 id="框架标签"><a href="#框架标签" class="headerlink" title="框架标签"></a>框架标签</h4><p>不能写在body里面,使用了框架标签需要把body去掉</p>
<p>&lt;frameset&gt;</p>
<p>&lt;frame name=”” src=””&gt;</p>
<p>&lt;\frame&gt;</p>
<p>&lt;/frameset&gt;</p>
<p>​    -rows :按照行划分</p>
<p>​    _cols:按照列划分</p>
<h2 id="CSS"><a href="#CSS" class="headerlink" title="CSS"></a>CSS</h2><p>每个HTML标签都有一个style属性</p>
<p>四种与HTML结合方式</p>
<p><strong>注意:第三种方式在某些浏览器下不起作用</strong>  通常使用第四种方式</p>
<h3 id="css的优先级"><a href="#css的优先级" class="headerlink" title="css的优先级"></a>css的优先级</h3><p>由上到下,由外到内,优先级由低到高</p>
<p>HTML由上到下加载  后加载的优先级更高</p>
<h3 id="选择器"><a href="#选择器" class="headerlink" title="选择器"></a>选择器</h3><p>格式 </p>
<p>选择器名称 {属性名:属性值 属性名 :属性值……}</p>
<p>三种基本选择器</p>
<p>1 标签选择器</p>
<p>​    以标签为选择器名称</p>
<p>2 class选择器</p>
<p>​        每个html都有一个class属性</p>
<p>​    标签名.classs属性值{}</p>
<p>​    或者不要标签名   .class属性值{}</p>
<p>3 id选择器</p>
<p>​    每个HTML标签都有一个id属性</p>
<p>​    #id{}</p>
<p>三个基本选择器的优先级</p>
<p>标签内设置样式&gt;id选择器&gt;class选择器&gt;标签选择器</p>
<p>扩展选择器</p>
<p>1   关联选择器</p>
<p>​    主要用来设置嵌套标签的样式</p>
<p>外标签[空格]内标签{ }</p>
<p>2  组合选择器</p>
<p>​    把不同标签设置成相同样式</p>
<p>​    标签1[,]标签2{ }</p>
<p>3 伪元素选择器</p>
<p>css里面提供了一些设置好的样式,可以直接拿来用</p>
<p>​    比如超链接</p>
<p>​    —链接的状态</p>
<p>​        原始状态  鼠标悬停状态 点击状态 点击后状态</p>
<p>​        :link          :hover          :active      :visited</p>
<h3 id="盒子模型-网页布局"><a href="#盒子模型-网页布局" class="headerlink" title="盒子模型(网页布局)"></a>盒子模型(网页布局)</h3><p>边框</p>
<p>​    border:</p>
<p>–width</p>
<p>–style</p>
<p>–color</p>
<p>​    可以统一设置</p>
<p>​    也可以分开设置</p>
<p>border-top ;border-bottom ;border-left ;  border-ringht</p>
<p>内边距</p>
<p>padding (同边框一样可以统一设置也可以分开设置)</p>
<p>–length</p>
<p>外边距</p>
<p> margin(同边框一样可以统一设置也可以分开设置)</p>
<p>–auto : 默认  不设置</p>
<p>–lenth</p>
<h3 id="布局的漂浮"><a href="#布局的漂浮" class="headerlink" title="布局的漂浮"></a>布局的漂浮</h3><p>​    <strong>float</strong></p>
<p>​    –none  :默认值  不设置漂浮</p>
<p>​    –left:当前节点居左,它后面的节点飘到它的右边</p>
<p>​    –right:和left相反</p>
<h3 id="布局的定位"><a href="#布局的定位" class="headerlink" title="布局的定位"></a>布局的定位</h3><p>​    <strong>psition</strong></p>
<p>​    –static : 默认值</p>
<p>​    –absolute : 将对象从文档中流出,进行绝对定位</p>
<p>​    –relative : 不从文档流中拖出</p>
<h2 id="javaScript"><a href="#javaScript" class="headerlink" title="javaScript"></a>javaScript</h2><h3 id="基本信息"><a href="#基本信息" class="headerlink" title="基本信息"></a>基本信息</h3><p>`–是基于对象和事件驱动的语言,应用于客户端</p>
<p>​    –html是静态网页   javascript实现动态效果</p>
<p>1 交互性</p>
<p>​    –信息的动态交互</p>
<p>2安全性</p>
<p>​    –js不能访问本地磁盘文件</p>
<p>3 跨平台性</p>
<p>​    –能够支持js的浏览器(目前所以的浏览器都支持),都可以运行</p>
<p>java和javaScript的区别(没有关联,两者没有关系)</p>
<p>java是SUN公司的(现在是oracle)  javascript  javascript是网景公司</p>
<p>2  javascript是基于对象的,java是面向对象的</p>
<p>3 java是强类型语言  js是弱类型语言</p>
<p>4  js只需要解析就可以执行 而java需要进行编译</p>
<p>js的组成</p>
<p>–1–ECMAScript</p>
<p>​    –ECMA  :欧洲计算机协会</p>
<p>​    –由ECMA组织制定的js的语法,语句….</p>
<p>–2–BOM</p>
<p>​    –broswer  object  model : 浏览器对象模型</p>
<p>–3–DOM</p>
<p>​    –document  objiect  model : 文档模型</p>
<p>js和html的结合方式(两种)</p>
<p>​    第一种 : 文档内</p>
<p>&lt;script&gt;js代码&lt;/script&gt;</p>
<p>​    第二种 : 引入外部文件</p>
<p>创建一个js文件,写入js代码</p>
<p>​    –&lt;script  src=”js文件路径”&gt;&lt;/script&gt;</p>
<p>​    注意:使用第二种方式在script标签内写js代码无效</p>
<p>js的原始类型和基本声明变量</p>
<p>​    –java的基本数据类型   </p>
<p>byte short int long float double  char boolean</p>
<p>​    –js的原始类型(五个)</p>
<p>​        –string: 字符串</p>
<p>​                —var string = ‘abc’</p>
<p>​        –number:数字类型</p>
<p>​            —var  number = 123;</p>
<p>​        –boolean:  true和false</p>
<p>​                var  flag = true ;</p>
<p>​        –null:</p>
<p>​                var date = new Date();</p>
<p>​                获取当前对象的引用</p>
<p>​                nullb表示对象的引用为空</p>
<p>​                object也是所有对象的引用</p>
<p>​                typeof (null)返回object</p>
<p>​        –undifined:</p>
<p>​                定义一个变量,没有赋值</p>
<p>​                var  aa</p>
<p>​    – typeof  </p>
<p>​    查看变量类型</p>
<p>​        typeof(变量类型)  </p>
<h3 id="js的语句-语法-运算符"><a href="#js的语句-语法-运算符" class="headerlink" title="js的语句,语法,运算符"></a>js的语句,语法,运算符</h3><p>js的语句</p>
<p>​    –java里面的语句</p>
<p>​        –if判断</p>
<p>​        –switch判断</p>
<p>​        –循环 for  while  do-whle</p>
<p>​    –js里面的这些语句</p>
<p>​        —-if判断</p>
<p>​        —-switch判断</p>
<p>​                –java里面支持的数据类型  string  jdk1.7k开始支持</p>
<p>​                –js;里面支持</p>
<p>​        –循环 for  while  do-whle</p>
<p>js的运算符</p>
<p>​        js里面不区分整数和小数</p>
<p>​        字符串操作</p>
<p>​        var  x= “abc”</p>
<p>​        x+1  和java一样字符串连接</p>
<p>​        x-1  如果x里面的字符串是数字则进行相减运算</p>
<p>​            如果不是数字则返回一个错误提示符</p>
<p>​        var  x = boolean</p>
<p>​            和数字运算时  true值为1      false值为0</p>
<p>​    —  ==和===的区别</p>
<p>​    ==比较值</p>
<p>​    ===比较值和类型</p>
<h3 id="js的数组和函数"><a href="#js的数组和函数" class="headerlink" title="js的数组和函数"></a>js的数组和函数</h3><p>js的数组</p>
<p>​    定义方式(三种)</p>
<p>​        第一种  :  var  arr = {1,2,”3”,true}</p>
<p>​        第二种 : 使用内置对象 Array对象</p>
<p>​        var arr1 = new Array(5)</p>
<p>​        也是从西下表0开始</p>
<p>​        第三种 : 使用内置对象</p>
<p>​        var  arr2 = new Array{3,4,5}</p>
<p>​        数组有一个属性length(长度)</p>
<p>​        数组的长度是可变的</p>
<p>​    数组里面可以存放不同的数据类型</p>
<p>js的函数</p>
<p>参数不需要使用var定义  直接写名称</p>
<p>三种定义方式</p>
<p>第一种  :   function  方法名(参数列表){      方法体;  返回值可有可无}</p>
<p>​    调用方法 :  方法名(参数列表)</p>
<p>第二种 :  匿名函数</p>
<p>​    var 方法名 = function(参数列表){}</p>
<p>第三种 :     (用的少,了解)</p>
<p>​    var add = new Function(‘参数列表”,”方法体和返回值”)</p>
<p>js的全局变量和局部变量</p>
<p>​    –全局变量 : 在script标签内定义一个变量  这个变量在页面的所有js都能读取到(另一个标签)</p>
<p>​    – 局部变量 : 在方法内部定义只能在方法内部使用</p>
<p>js的函数重载</p>
<p>​    重载:方法名相同  参数列表不同</p>
<p>js里面不存在重载</p>
<p>​    就近原则  调用函数</p>
<p>js的全局函数</p>
<p>不属于任何一个对象,直接写名称来使用</p>
<p>​        eval()</p>
<h3 id="script标签位置放置"><a href="#script标签位置放置" class="headerlink" title="script标签位置放置"></a>script标签位置放置</h3><p>​        –一般放在body后面  因为浏览器是从上到下解析的</p>
<p>​            如果js需要操作js代码后面的元素就会报错 </p>
<p>​            因为浏览器还没解析到后面的代码</p>
<h3 id="js的对象"><a href="#js的对象" class="headerlink" title="js的对象"></a>js的对象</h3><p>js的string对象</p>
<p>​    属性 –length(长度)</p>
<p>​    –方法</p>
<p>​        –(1)与html相关的</p>
<p>​            –bold()   :加粗</p>
<p>​            –fontcolor()   :字体颜色设置</p>
<p>​            –fontsizi()    :字体大小设置</p>
<p>​            –link(  url  )  : 将字符串变成超链接  </p>
<p>​            –sub()  :下标   sup()  :下标</p>
<p>​        –(2)与java相似的方法</p>
<p>​            –concet()  :字符串连接</p>
<p>​            –charAt()  :   取得指定未知的单个字符//字符位置不存在则返回空字符串</p>
<p>​            –indexOf(char)  :  返回某个字符在字符串的索引</p>
<p>​    如果字符不存在则返回-1</p>
<p>​            –split()  :  按指定某个自字符对字符串进行切割</p>
<p>​    返回一个数组   切割字符不在数组中</p>
<p>​            –repalce(a,b)  替换字符串</p>
<p>​                –a  :要替换的字符</p>
<p>​                –b  :要替换成的字符  </p>
<p>​            –substr(a,b)   :</p>
<p>​                        从第a位开始向后截取b位字符</p>
<p>​            –substring(a,b)  :</p>
<p>​                        从第a位开始到第b位开始但不包括第b位</p>
<p>js 的Array对象</p>
<p>​            arr1.cancat(arr2)  :连接字符串</p>
<p>js的Date对象</p>
<p>​        –获取当前时间  :   var date  = new Date()  </p>
<p>​        – 转换成本地格式  :  date.toLocalString() </p>
<p>​        – 得到当前周的星期getDay()</p>
<p>js的math对象</p>
<p>​        —数学运算</p>
<p>js的BOM对象</p>
<p>bom :broswer oject model  :浏览器对象模型</p>
<p>​        –navigator  :  获取浏览器的信息</p>
<p>​        –scren  :获取屏幕信息</p>
<p>​        –location  :请求的url地址</p>
<p>​                –href属性</p>
<p>​                    –获取到当前请求的url地址</p>
<p>​                    –设置url地址</p>
<p>​                        –页面上放置一个按钮,按钮绑定一个事件,可以跳转页面                    </p>
<p>​        –history  :请求的URL的历史记录</p>
<p>​                –实现浏览器上面的前进后退效果</p>
<p>也可以去history中某个具体的页面</p>
<p>​    go(n)  :</p>
<p>​        正数表示到当前页面后面的第N个页面</p>
<p>​        负数表示到当前页面前面的第N个页面</p>
<p>​        <strong>–window  :</strong></p>
<p><strong>窗口对象</strong></p>
<p><strong>顶层对象</strong></p>
<p>方法  :</p>
<p>​        –alert()  :</p>
<p>​        –confirm()  : (确认框)</p>
<p>​            返回true或false</p>
<p>​        –prompt()  :  输入的对话框</p>
<p>​        –open()  : 打开一个新的窗口</p>
<p>​        –close()  :  关闭窗口(浏览器兼容性较差)</p>
<p>​        – setInterval(“js代码”,毫秒数)</p>
<p>​            多少毫秒一个周期指定js代码</p>
<p>​        –clearInterval()  :  清除setInterval定时器</p>
<p>​        –setTimeout(“js代码”,毫秒数)  </p>
<p>​            多少毫秒后执行js代码   只执行一次</p>
<p>​        –clearTimeeout()  :清除setTimeout定时器</p>
<p>js的dom对象</p>
<p>​        –dom :  document object model  : 文档对象模型</p>
<p>​        –文档</p>
<p>​            超文本文档(超文本标记文档)  html ,xml</p>
<p>​        –对象  :</p>
<p>​            提供了属性和方法</p>
<p>​        –模型  :  使用属性和方法操作超文本标记文档</p>
<p>可以使用dom对象提供的属性和方法对标记的超文本文档进行操作</p>
<p>想要对标记的标记型文档进行操作,需要先对文档进行解析</p>
<p>document对象</p>
<p>​        –是整个html文档</p>
<p>​        常用方法</p>
<p>​        –write()</p>
<p>​        –getElementsById()</p>
<p>​            : 通过Id来获得元素(标签)</p>
<p>​        –getElementName()</p>
<p>​            –通过name属性值获得元素(标签)</p>
<p>​            注意:  因为name属性值可以相同</p>
<p>​        所以这个方法返回的是一个name属性值符合</p>
<p>​            得对象集合</p>
<p>​        —-getElementsTageName()</p>
<p>​            根据标签名获得元素(标签)</p>
<p>​            返回一个标签数组</p>
<h3 id="js使用"><a href="#js使用" class="headerlink" title="js使用"></a>js使用</h3><p>window的弹窗实现</p>
<p>​        实现</p>
<p>​            –使用open方法打开一个新窗口</p>
<p>​        –opener  :  得到创建这个窗口的窗口引用</p>
<p>创建结点</p>
<p>createElement()  :  创建标签</p>
<p>createTextNode()  :  创建文本结点</p>
<p>appendChild()  :  添加到调用结点的下面</p>
<p>element</p>
<p>方法</p>
<p>​        getAttribute()    : 获取元素属性</p>
<p>​        setAtteibute()  :  设置元素属性</p>
<p>​        removeAttribute()  :  删除元素属性</p>
<p>​            注意:  不能删除value的值</p>
<p>属性</p>
<p>​        childNode  :  返回子标签的集合</p>
<p>​            浏览器兼容性差</p>
<p>​        解决办法getElementsTageName()</p>
<p>Node对象</p>
<p>​        属性一</p>
<p>​        –nodeName  : </p>
<p>​            标签  : 返回大写的标签名</p>
<p>​            属性  :  返回属性名</p>
<p>​            文本  : #text</p>
<p>​        –nodeType</p>
<p>​            标签  : 1</p>
<p>​            属性  :  2</p>
<p>​            文本  :  3</p>
<p>​        –nodeValue</p>
<p>​            标签  : null</p>
<p>​            属性  : 属性值</p>
<p>​            文本  :  文本内容</p>
<p>​    属性二</p>
<p>​        父节点 :</p>
<p>​        parentNode</p>
<p>​        子节点 :</p>
<p>​        childNode :所有子节点</p>
<p>​        firstChild  :第一个子节点</p>
<p>​        lastChild : 最后一个子节点</p>
<p>​        同辈结点 :</p>
<p>​            nextSibling  : 下一个同辈结点</p>
<p>​            previousSibling  :上一个同辈结点</p>
<p>操作dom树</p>
<p>appendChild(Node)</p>
<p>​        剪切粘贴效果</p>
<p>insertBefore(newNode,oldNode)</p>
<p>​        在某个结点之前插入一个新的结点</p>
<p>removeChild(Node)</p>
<p>​        通过父节点调用这个方法来删除子结点</p>
<p>​        </p>
<p>replaceChild(newNode,oldNode)    </p>
<p>​    父节点调用</p>
<p>cloneNode(boolean)</p>
<p>​        复制结点</p>
<p>innerHTML属性</p>
<p>这个属性不是dom组成部分,基本所有浏览器都支持</p>
<p>​        获取内容</p>
<p>​        设置内容 : 会替换原内容 可以解析html代码</p>
<h2 id="XML"><a href="#XML" class="headerlink" title="XML"></a>XML</h2><p>语法</p>
<p>​    1 xml的文档声明</p>
<p>​        创建一个文件 ,后缀名是 .xml</p>
<p>​        <?xml version="1.0" encoding="gbk"?></p>
<p>​        必须写在第一行第一列</p>
<p>​        属性</p>
<p>​        standalone:  true  false  表示是否依赖其他文件</p>
<p>​    一个XML文件中有且只有一个标签  其他标签都是他下        面的标签</p>
<p>​    xml文件中 空格和换行都被作为原始内容来处理  所以不要随意添加空格和换行</p>
<h3 id="xml中标签名称命名规范"><a href="#xml中标签名称命名规范" class="headerlink" title="xml中标签名称命名规范"></a>xml中标签名称命名规范</h3><p>​    –区分大小写</p>
<p>​    –不能以数字和下划线开头</p>
<p>​    –不能以xml.XML,Xml等开头</p>
<p>​    –不能包含空格和冒号</p>
<h3 id="xml属性的定义"><a href="#xml属性的定义" class="headerlink" title="xml属性的定义"></a>xml属性的定义</h3><p>​    **一个标签上可以有多个属性,属性名称不能相同</p>
<p>​    **属性名称和属性值之间使用”=”连接,属性值可以用单引号也可以用双引号</p>
<p>​    **属性名称规范和标签名称规范一样</p>
<h3 id="xml中的注释"><a href="#xml中的注释" class="headerlink" title="xml中的注释"></a>xml中的注释</h3><p>​        &lt;!–xml的注释–&gt;</p>
<p>​    注释不能嵌套,不能放在第一行第一列</p>
<h3 id="xml中的特殊字符"><a href="#xml中的特殊字符" class="headerlink" title="xml中的特殊字符"></a>xml中的特殊字符</h3><h3 id="xml-CDATE区"><a href="#xml-CDATE区" class="headerlink" title="xml CDATE区"></a>xml CDATE区</h3><p>**可以解决多个字符都需要转义的操作</p>
<p>**把这些内容放在CDATE区里面就不需要转义了</p>
<p>​    **&lt; ! [ CDATE [ 内容  ] ] &gt;</p>
<p>​        &lt; ! [ CDATE [     内容 ] ] &gt;</p>
<h3 id="xml-PI指令-处理指令"><a href="#xml-PI指令-处理指令" class="headerlink" title="xml PI指令(处理指令)"></a>xml PI指令(处理指令)</h3><p>​    引入外部css文件</p>
<?xml-stylesheet type="text/css" href="css文件路径"?>

<p>​    **对中文标签不起作用</p>
<h3 id="xml的约束-dtd"><a href="#xml的约束-dtd" class="headerlink" title="xml的约束  dtd"></a>xml的约束  dtd</h3><p>​    xml约束的方式 :  dtd约束  和  schema约束  </p>
<p>​    dtd</p>
<p>​        **创建一个后缀名为dtd的文件</p>
<p>​        步骤:</p>
<p>​            1  看xml中有多少个元素,有多少元素就写多少个 &lt;!ELEMENT&gt;</p>
<p>​            –复杂元素 :有子元素</p>
<p>​            &lt;! ELEMENT 元素名称 (所以子元素,用逗号隔开)&gt;</p>
<p>​            –简单元素 没有子元素</p>
<p>​            <!ELEMNET 元素名称 (#PCDATA) ></p>
<p>用浏览器不检验xml约束只检验xml语法</p>
<h4 id="dtd引入方式"><a href="#dtd引入方式" class="headerlink" title="dtd引入方式"></a>dtd引入方式</h4><p>第一种 :引入外部文件</p>
<p>​    <!DOCTYPE 根元素名称 SYSTEM "dtd文件的路径"></p>
<p>第二种 :  内部定义</p>
<p>​    <!DOCTAYE 根元素名称 [ 约束内容 ]></p>
<p>第三种 : 使用网络上的dtd文件</p>
<p>​    <!DOCTYPE 根元素名称 PUBLIC  "dtd文档名称"  "文件路径"></p>
<h4 id="使用dtd定义元素"><a href="#使用dtd定义元素" class="headerlink" title="使用dtd定义元素"></a>使用dtd定义元素</h4><pre><code>**语法  &lt;!ELEMENT 元素 元素内容类型&gt;</code></pre><p>​    简单元素:</p>
<p>​        (#PCDATA)  : 约束元素为字符串类型</p>
<p>​        EMPTY:  约束元素为空</p>
<p>​        ANY  :  元素内容可以任意类型</p>
<p>​    复杂元素:</p>
<p>​        <!ELEMENT 元素 (子元素1,子元素2,子元素3)></p>
<p>​        +  :  表示出现一次或多次</p>
<p>​        ?  :  表示零次或一次</p>
<p>​        *  :   表示零次或多次</p>
<p>​        子元素列表用逗号分隔  </p>
<p>​                表示子元素出现顺序</p>
<p>​        子元素列表用 | 分隔  </p>
<p>​        表示几个只能出现一个</p>
<h4 id="dtd定义属性"><a href="#dtd定义属性" class="headerlink" title="dtd定义属性"></a>dtd定义属性</h4><p>​    ** 语法 : </p>
<p>​        <!ATTLIST 元素 属性  属性类型 约束></p>
<p>属性类型:</p>
<p>​        CDATA :  字符串</p>
<p>​        枚举 :  表示只能在一定范围内出现值 每次只能出现期中一个  (aa|bb|cc)</p>
<p>​        ID  :  必须以字母或者下划线开头</p>
<p>约束:</p>
<p>​    #REQUIRED  :  属性必须要有</p>
<p>​    #IMPLIED :  属性可以可无</p>
<p>​    #FIXED  :  属性值必须是自己定义的某个固定值 </p>
<p>​    直接值  :  直接在后面写一个值(可以理解为默认值)</p>
<h4 id="定义实体"><a href="#定义实体" class="headerlink" title="定义实体"></a>定义实体</h4><p>​    概念 : 在dtd 中定义,在xml文件中使用</p>
<p>​    **语法 : <!ENTITY 实体名称 "实体的值"></p>
<p>​    ***<!ENTITY TEST "helloworld"></p>
<p>​    *<em>\</em>使用实体   <strong>&TEST;</strong></p>
<p>​    ***注意</p>
<p>​        定义实体需要写在内部dtd里面    </p>
<p>​        写在外不dtd浏览器可能取不到</p>
<h3 id="xml解析"><a href="#xml解析" class="headerlink" title="xml解析"></a>xml解析</h3><p>想要解析xml,首先需要解析器</p>
<p> 不同的公司和组织提供了针对dom和sax的解析器,通过api方式提供</p>
<p>​    sun公司提供  jaxp</p>
<p>​    dom4j组织 ,dom4j  (jdom的升级)</p>
<p>​    jdom组织   jdom</p>
<p>​    –xml的解析方式 :   dom ; sax</p>
<h4 id="dom解析"><a href="#dom解析" class="headerlink" title="dom解析"></a>dom解析</h4><p>  : 根据xml的层级结构 在内存分配一个树形结构</p>
<p>​        弊端:文件过大会出现内存溢出</p>
<p>​        优点 :  结构清晰 易于增删改查</p>
<h4 id="sax"><a href="#sax" class="headerlink" title="sax"></a>sax</h4><p> : 采用事件驱动 ,边读边解析</p>
<p>从上到下,一行一行的解析,解析到某一个对象,把对象名称返回</p>
<p>​    跟dom优势与缺点相反</p>
<p>​    不会造成内存溢出  实现查询</p>
<p>​        不能实现增删改查</p>
<h4 id="jaxp"><a href="#jaxp" class="headerlink" title="jaxp"></a>jaxp</h4><p>​    jaxp是javase的一部分</p>
<p>​    jaxp解析在jdk的javax.xml.parsers包里面</p>
<p>​    四个类  :  分别针对dom和sax解析时使用的类</p>
<p>​    dom:</p>
<p>​        documentBuilder  : 解析器</p>
<p>​        documentBuilderFactory :  解析器工厂</p>
<p>对xml文档进行修改时  需要进行回写</p>
<p>因为你修改的只是内存中的xml</p>
<p>​    sax:</p>
<h4 id="dom4j"><a href="#dom4j" class="headerlink" title="dom4j"></a>dom4j</h4><p>dom4j集合了dom解析和sax解析的优点</p>
<p>既方便查询又可以增删改查</p>
<p>导入dom4j提供的jar包</p>
<p>​    –创建一个文件夹</p>
<p>​    –复制jar到文件夹</p>
<p>​    –右键点击jar包  build  path  –  add  to  buildpath</p>
<p>得到document</p>
<p>回写xml</p>
<p>注意 :  XMLWriter是dom4j下面的类</p>
<p>​    不是java.io下面的类</p>
<p>attributeValue(属性名称) : 得到元素的属性值</p>
<p><strong>Xpath</strong></p>
<p>导入支持Xpath的jar包,使用 jaxen-1.1-beta-6.jar</p>
<p>dom4j里面提供了两个方法,用来支持Xpatn</p>
<p>​    – selectNodes(“Xpath表达式”)  :  获取多个结点</p>
<p>​    – selectSingleNode(“Xpath表达式”)  :  获取单个结点</p>
<p>可以直接获得某个元素</p>
<p>第一种形式:</p>
<p>​    /AAA/DDD/BBB : 表示一层一层的,</p>
<p>​    AAA下面的DDD下面的BBB</p>
<p>第二种形式:</p>
<p>​    //BBB : 表示只要名称是BBB 都得到</p>
<p>第三种形式: </p>
<p>​    /* :所有元素</p>
<p>第四种形式:</p>
<p>​    BBB[1] : 表示第一个BBB元素</p>
<p>​    BBB[last()] : 表示最后一个BBB元素</p>
<p>第五种形式:</p>
<p>​    //BBB[@id]  :  表示只要有id属性的BBB元素</p>
<p>第六种形式:</p>
<p>​    //BBB[@id=’b1’]  : 表示id属性值为b1的BBB元素</p>
<h3 id="schema约束"><a href="#schema约束" class="headerlink" title="schema约束"></a>schema约束</h3><p>schema符合xml语法  也就是说里面写的就是xml</p>
<p>schema 支持更多数据类型  比如int  double等等</p>
<p>schema 比dtd约束更严格</p>
<h4 id="schema使用"><a href="#schema使用" class="headerlink" title="schema使用"></a>schema使用</h4><p>引入schema文件</p>
<p>后缀名为xsd  的文件</p>
<h4 id="元素约束"><a href="#元素约束" class="headerlink" title="元素约束"></a>元素约束</h4><p>&lt;sequence&gt; :  表示元素出现的顺序</p>
<p>&lt;all&gt;  :  只能出现一个</p>
<p>&lt;chioce&gt;  : 元素只能出现其中一个</p>
<p>&lt;anny&gt; :  表示任意元素</p>
<p>maxOccurs = “unbounded”  :  表示元素出现的次数</p>
<p>(元素的标签内)</p>
<h4 id="属性约束"><a href="#属性约束" class="headerlink" title="属性约束"></a>属性约束</h4><p>–写在复杂元素里面</p>
<p>–写&lt;complexType&gt;最后一行内容</p>
<p>&lt;attribute name=””  type=””  use=””&gt;&lt;/attribute&gt;</p>
<p>​        –name  :  属性名称</p>
<p>​        –type  :  属性类型</p>
<p>​        – use  :  属性是否必须出现 required(必须出现)</p>
<p>引入多个schema约束文件时</p>
<p>xmlns :  别名  :  地址  </p>
<p>使用别名加以区别</p>
<p>&lt;要使用的约束的别名  : 元素名&gt;</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://djf-github.github.io/2018/05/17/java_base/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="djf">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="我要养只大熊猫">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/05/17/java_base/" class="post-title-link" itemprop="url">Base of Java</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-05-17 20:43:39" itemprop="dateCreated datePublished" datetime="2018-05-17T20:43:39+08:00">2018-05-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-03-28 11:41:29" itemprop="dateModified" datetime="2020-03-28T11:41:29+08:00">2020-03-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="1-循环语句"><a href="#1-循环语句" class="headerlink" title="1. 循环语句"></a>1. 循环语句</h2><h3 id="for语句"><a href="#for语句" class="headerlink" title="for语句:"></a>for语句:</h3><p>嵌套循环时 尖朝上改变条件表达式,尖朝下改变初始化表达式.</p>
<h2 id="2-函数"><a href="#2-函数" class="headerlink" title="2.函数"></a>2.函数</h2><p>构造代码块:</p>
<p> 没有名称 给所有对象初始化 优先于构造函数</p>
<h2 id="3-设计模式"><a href="#3-设计模式" class="headerlink" title="3.设计模式"></a>3.设计模式</h2><h3 id="1-单例模式"><a href="#1-单例模式" class="headerlink" title="1.单例模式"></a>1.单例模式</h3><p>单例模式在程序设计中使用的频率非常之高，其设计的目的是为了在程序中提供唯一一个对象（保证只被构造一次），例如写入日志的log对象，windows的任务管理器实现（只能打开一个）。这里主要介绍单例模式使用Java的实现（包括饿汉式及懒汉式）。</p>
<h4 id="1-饿汉式"><a href="#1-饿汉式" class="headerlink" title="1.饿汉式"></a>1.饿汉式</h4><p>饿汉式的单例模式理解起来是比较容易的，就是在单例类加载的时候就初始化需要单例的对象。实现也比较容易。</p>
<p>public class Singleton{<br>​    private static Log logObj = new Log();</p>
<p>​    public static Log getInstance(){<br>​        return logObj;<br>​    }<br>}</p>
<h4 id="2-懒汉式"><a href="#2-懒汉式" class="headerlink" title="2.懒汉式"></a>2.懒汉式</h4><p>如果这个对象占用内存很大,一开始就初始化对象的话很浪费内存</p>
<p>所有想出了下面这种办法:在我需要的时候再初始化</p>
<p><strong>注意:这里面不考虑线程等等因素后期学到了再补充</strong></p>
<p>public class Singleton{<br>​    private static Log logObj = null;</p>
<p>​    public static Log getInstance(){<br>​        if(logObj == null){<br>​            logObj = new Log();<br>​        }<br>​        return logObj;<br>​    }<br>}</p>
<h2 id="重载与重写"><a href="#重载与重写" class="headerlink" title="重载与重写"></a>重载与重写</h2><p>函数名相同参数不同叫重载,与返回值类型无关.</p>
<p>函数定义一样,方法体不同叫重写.</p>
<h2 id="多态"><a href="#多态" class="headerlink" title="多态"></a>多态</h2><p>多态指父类引用指向子类对象</p>
<p>多态时只能调用父类中被子类重写或者子类没有的方法</p>
<p>因为编译时检查引用发现是父类的就会去父类中寻找相应方法调用</p>
<p>如果父类中没有该方法则编译失败</p>
<p>运行时子类对象去子类中调用相应方法.</p>
<p>如果是同名变量,只跟引用类型有关与具体指向对象无关</p>
<h2 id="内部类"><a href="#内部类" class="headerlink" title="内部类"></a>内部类</h2><p>在Java中，可以将一个类定义在另一个类里面或者一个方法里面，这样的类称为内部类。</p>
<p>广泛意义上的内部类一般来说包括这四种：成员内部类、局部内部类、匿名内部类和静态内部类。</p>
<h4 id="1-成员内部类"><a href="#1-成员内部类" class="headerlink" title="1.成员内部类"></a>1.成员内部类</h4><p>成员内部类可以无条件访问外部类的所有成员属性和成员方法（包括private成员和静态成员）。</p>
<p>不过要注意的是，当成员内部类拥有和外部类同名的成员变量或者方法时，会发生隐藏现象，即默认情况下访问的是成员内部类的成员。</p>
<p>外部类必须要先创建内部类的对象才可以对内部类访问</p>
<p>如果要创建成员内部类的对象，前提是必须存在一个外部类的对象。</p>
<p>内部类可以被private修饰</p>
<h4 id="2-局部内部类"><a href="#2-局部内部类" class="headerlink" title="2.局部内部类"></a>2.局部内部类</h4><h4 id="3-匿名内部类"><a href="#3-匿名内部类" class="headerlink" title="3.匿名内部类"></a>3.匿名内部类</h4><h4 id="4-静态内部类"><a href="#4-静态内部类" class="headerlink" title="4.静态内部类"></a>4.静态内部类</h4><h2 id="String类"><a href="#String类" class="headerlink" title="String类"></a>String类</h2><h2 id="其他内置对象"><a href="#其他内置对象" class="headerlink" title="其他内置对象"></a>其他内置对象</h2><p>system类</p>
<h2 id="I-O流"><a href="#I-O流" class="headerlink" title="I/O流"></a>I/O流</h2><h3 id="BufferedWriter"><a href="#BufferedWriter" class="headerlink" title="BufferedWriter"></a>BufferedWriter</h3><p>将文本写入字符输出流，缓冲各个字符，从而提供单个字符、数组和字符串的高效写入。</p>
<p>可以指定缓冲区的大小，或者接受默认的大小。在大多数情况下，默认值就足够大了。</p>
<p>该类提供了 newLine() 方法，它使用平台自己的行分隔符概念，此概念由系统属性 line.separator 定义。</p>
<p>并非所有平台都使用新行符 (‘\n’) 来终止各行。因此调用此方法来终止每个输出行要优于直接写入新行符。</p>
<h3 id="OutputStreamWriter"><a href="#OutputStreamWriter" class="headerlink" title="OutputStreamWriter"></a>OutputStreamWriter</h3><p>将字节流转换为字符流，并制定编码方式 </p>
<h3 id="FileOutputStream"><a href="#FileOutputStream" class="headerlink" title="FileOutputStream"></a>FileOutputStream</h3><p>指定文件来创建一个输出流(字节流),第二个boolean型参数为TRUE时表示继续往后写 </p>
<p>为falses时覆盖原内容重写,默认为false.</p>
<p>第一个参数可以用String类型来表示一个已存在的文件的文件名 </p>
<h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><p><strong>泛型</strong></p>
<p>​    一般使用在集合上</p>
<p><strong>枚举</strong></p>
<p>​    枚举里面的常量是类的实例</p>
<p>​    枚举里面可以有 有参构造方法</p>
<p>​    在实例后面跟加上参数就行</p>
<p>​    枚举里面可以有抽象方法</p>
<p>​    在实例后面实现他就行</p>
<p><strong>静态导入</strong></p>
<p>​    import static ….</p>
<p><strong>自动拆装箱</strong></p>
<p><strong>增强for循环</strong></p>
<p>​    for(类型 引用变量:集合)</p>
<p>​    底层和迭代器一样  为了替换迭代器  简化代码</p>
<p>​    原理  实现了Iterable接口  List和Set  Map不能使用</p>
<h2 id="反射"><a href="#反射" class="headerlink" title="反射"></a><strong>反射</strong></h2><p>​    原理:</p>
<p>​    在框架开发中,都是基于配置文件开发的</p>
<p>​    在[配置文件中配置了类,可以通过反射得到类中的所有内容,可以让某个方法来执行</p>
<p>使用反射首先需要得到Class类</p>
<p>​    三种方式:</p>
<p>​    – 类名.class</p>
<p>​    – 对象.getClass()</p>
<p>​    – 使用Class.forName(“路径”)</p>
<h3 id="操作构造方法"><a href="#操作构造方法" class="headerlink" title="操作构造方法"></a>操作构造方法</h3><p>先得到Class c</p>
<p>c.getInstance()//得到无参数的实例化对象</p>
<p>c.getConstructors() 得到所有构造方法</p>
<p>c.getConstructor(里面是你要得到的有参构造方法的类型.class)</p>
<h3 id="操作属性"><a href="#操作属性" class="headerlink" title="操作属性"></a>操作属性</h3><p>先得到类Class c</p>
<p>c.getDeclaredFields()  : 得到所有属性</p>
<p>Field f = c.getDeclaredFields(“属性名”) </p>
<p>f.set(对象引用,”属性值”)</p>
<p>如果你要操作的是私有属性还要执行一个方法</p>
<p>f.setAccessible(true)   :  设置可以操作私有属性</p>
<h3 id="操作普通方法"><a href="#操作普通方法" class="headerlink" title="操作普通方法"></a>操作普通方法</h3><p>​    先得到类Class c</p>
<p>​    c.getDeclaredMegods()   :  得到所有方法</p>
<p>​    Method m= c.getDeclaredMegod(“方法名”,”方法参数类型.class”)</p>
<p>​    m.invoke(对象实例,”方法参数值”)</p>
<p>操作静态方法时第一个参数填 null</p>
<p><strong>可变参数</strong></p>
<p>​    public void test(int…nums){}</p>
<p>​    int  为参数类型</p>
<p>​    nums(自定义的参数数组名)  :</p>
<p>​        为一个数组储存传进去的参数</p>
<p>可以和其他参数共存,只能存在一个可变参数,需要放在参数列表最后面</p>
<h1 id="GUI"><a href="#GUI" class="headerlink" title="GUI"></a>GUI</h1><h2 id="component-组件"><a href="#component-组件" class="headerlink" title="component(组件)"></a>component(组件)</h2><h3 id="button-按钮"><a href="#button-按钮" class="headerlink" title="button(按钮)"></a>button(按钮)</h3><h3 id="lable-标签"><a href="#lable-标签" class="headerlink" title="lable(标签)"></a>lable(标签)</h3><p>一般用来封装文字</p>
<h3 id="Checkbox-复选框"><a href="#Checkbox-复选框" class="headerlink" title="Checkbox(复选框)"></a>Checkbox(复选框)</h3><h3 id="TextComponent-文本组件"><a href="#TextComponent-文本组件" class="headerlink" title="TextComponent(文本组件)"></a>TextComponent(文本组件)</h3><h4 id="TextArea-文本域"><a href="#TextArea-文本域" class="headerlink" title="TextArea(文本域)"></a>TextArea(文本域)</h4><h4 id="TextField-文本框"><a href="#TextField-文本框" class="headerlink" title="TextField(文本框)"></a>TextField(文本框)</h4><h2 id="Container-容器"><a href="#Container-容器" class="headerlink" title="Container(容器)"></a>Container(容器)</h2><p>该类是一个特殊的组件,可以通过add()方法添加其他组件进来.</p>
<h3 id="Window-窗口"><a href="#Window-窗口" class="headerlink" title="Window(窗口)"></a>Window(窗口)</h3><h4 id="Frame-框架或者说小窗体"><a href="#Frame-框架或者说小窗体" class="headerlink" title="Frame(框架或者说小窗体 )"></a>Frame(框架或者说小窗体 )</h4><h4 id="Dialog-对话框"><a href="#Dialog-对话框" class="headerlink" title="Dialog(对话框)"></a>Dialog(对话框)</h4><h5 id="FileDialog-文件对话框"><a href="#FileDialog-文件对话框" class="headerlink" title="FileDialog(文件对话框)"></a>FileDialog(文件对话框)</h5><h3 id="Panel-面板"><a href="#Panel-面板" class="headerlink" title="Panel(面板)"></a>Panel(面板)</h3><h2 id="布局"><a href="#布局" class="headerlink" title="布局"></a>布局</h2><h3 id="FlowLayout-流式布局"><a href="#FlowLayout-流式布局" class="headerlink" title="FlowLayout(流式布局)"></a>FlowLayout(流式布局)</h3><p>从左到有右排列</p>
<p>自动换行,组件默认自动居中</p>
<p>Panel(面板)默认的布局</p>
<h3 id="BorderLayout-边界布局"><a href="#BorderLayout-边界布局" class="headerlink" title="BorderLayout(边界布局)"></a>BorderLayout(边界布局)</h3><p>Frame(框架)默认的布局</p>
<h3 id="GridLayout-网格布局"><a href="#GridLayout-网格布局" class="headerlink" title="GridLayout(网格布局)"></a>GridLayout(网格布局)</h3><h3 id="Cardlayout-卡片布局"><a href="#Cardlayout-卡片布局" class="headerlink" title="Cardlayout(卡片布局)"></a>Cardlayout(卡片布局)</h3><h3 id="GridBagLayout-网格包布局"><a href="#GridBagLayout-网格包布局" class="headerlink" title="GridBagLayout(网格包布局)"></a>GridBagLayout(网格包布局)</h3><h1 id="jar"><a href="#jar" class="headerlink" title="jar"></a>jar</h1><p>jar -cvfm -路径 -jar包名 txt 需要打包的包名</p>
<p>配置jar包信息</p>
<p>自定一个txt文件写入主函数信息</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://djf-github.github.io/2018/04/17/java_socket/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="djf">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="我要养只大熊猫">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/04/17/java_socket/" class="post-title-link" itemprop="url">Socket of Java</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-04-17 18:45:39" itemprop="dateCreated datePublished" datetime="2018-04-17T18:45:39+08:00">2018-04-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-03-09 02:23:19" itemprop="dateModified" datetime="2020-03-09T02:23:19+08:00">2020-03-09</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="网络编程"><a href="#网络编程" class="headerlink" title="网络编程"></a>网络编程</h1><h2 id="UDP"><a href="#UDP" class="headerlink" title="UDP"></a>UDP</h2><p>传输速度快,不保证数据完整性性</p>
<p>先建立端点或者说站点</p>
<p>DatagramSocket</p>
<p>然后建立数据报</p>
<p>DatagramPacket</p>
<p>注意数据报里面只能接收字节数组</p>
<p>数据包里面包含路由信息(接收的主机地址和端口号)和数据信息(数据内容和数据长度)</p>
<p>然后通过端点对象调用send(数据报对象)发送出去</p>
<p>接收的话也是先建立端点对象只不过初始化对象的时候要指明接收的端口</p>
<p>然后通过端点对象调用receive(数据报)接收.</p>
<h2 id="TCP"><a href="#TCP" class="headerlink" title="TCP"></a>TCP</h2><p>先建立面向连接的客户端和服务端</p>
<p>客服端:SocKet</p>
<p>服务端:ServerSocket</p>
<p>面向连接指端点初始化时指定了要通信的主机地址和端口</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

  </div>

  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">djf</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">10</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">7</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">14</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">djf</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v4.2.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">主题 – <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> v7.7.2
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
